# Checkboxå’Œç™»å½•æŒ‰é’®åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## åŠŸèƒ½æ¦‚è¿°

å¢å¼ºè¾“å…¥å¤„ç†å™¨ç°åœ¨å®Œå…¨æ”¯æŒæ™ºèƒ½ç™»å½•æ“ä½œå™¨çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- ğŸ“ **æ™ºèƒ½æ–‡æœ¬è¾“å…¥** - ç”¨æˆ·åå’Œå¯†ç è‡ªåŠ¨è¯†åˆ«è¾“å…¥
- â˜‘ï¸ **Checkboxè‡ªåŠ¨å‹¾é€‰** - åè®®åŒæ„æ¡†æ™ºèƒ½è¯†åˆ«å’Œæ“ä½œ
- ğŸ”˜ **ç™»å½•æŒ‰é’®è‡ªåŠ¨ç‚¹å‡»** - ç™»å½•æŒ‰é’®æ™ºèƒ½è¯†åˆ«å’Œç‚¹å‡»
- ğŸš€ **ä¸€é”®è‡ªåŠ¨ç™»å½•** - å®Œæ•´ç™»å½•æµç¨‹è‡ªåŠ¨åŒ–

## JSONé…ç½®æ–¹å¼

### æ–¹å¼1ï¼šåˆ†æ­¥æ“ä½œ (æ¨èç”¨äºå¤æ‚åœºæ™¯)

```json
{
  "steps": [
    {
      "step": 1,
      "action": "input",
      "text": "${account:username}",
      "target_selector": {
        "placeholder": "è¯·è¾“å…¥æ‰‹æœºå·"
      },
      "confidence": 0.95,
      "timestamp": "2025-06-11 10:00:00.000000",
      "remark": "è¾“å…¥ç™»å½•ç”¨æˆ·å"
    },
    {
      "step": 2,
      "action": "input",
      "text": "${account:password}",
      "target_selector": {
        "placeholder": "è¯·è¾“å…¥å¯†ç "
      },
      "confidence": 0.95,
      "timestamp": "2025-06-11 10:00:05.000000",
      "remark": "è¾“å…¥ç™»å½•å¯†ç "
    },
    {
      "step": 3,
      "action": "checkbox",
      "target_selector": {
        "type": "agreement_checkbox"
      },
      "confidence": 0.95,
      "timestamp": "2025-06-11 10:00:10.000000",
      "remark": "å‹¾é€‰ç”¨æˆ·åè®®"
    },
    {
      "step": 4,
      "action": "click",
      "target_selector": {
        "type": "login_button"
      },
      "confidence": 0.92,
      "timestamp": "2025-06-11 10:00:15.000000",
      "remark": "ç‚¹å‡»ç™»å½•æŒ‰é’®"
    }
  ]
}
```

### æ–¹å¼2ï¼šä¸€é”®è‡ªåŠ¨ç™»å½• (æ¨èç”¨äºç®€å•åœºæ™¯)

```json
{
  "steps": [
    {
      "step": 1,
      "action": "auto_login",
      "params": {
        "username": "${account:username}",
        "password": "${account:password}"
      },
      "confidence": 0.95,
      "timestamp": "2025-06-11 10:00:00.000000",
      "remark": "æ‰§è¡Œå®Œæ•´è‡ªåŠ¨ç™»å½•æµç¨‹"
    }
  ]
}
```

## Actionç±»å‹è¯¦è§£

### 1. `input` - æ–‡æœ¬è¾“å…¥
- **åŠŸèƒ½**: æ™ºèƒ½è¯†åˆ«å¹¶è¾“å…¥æ–‡æœ¬åˆ°ç›®æ ‡è¾“å…¥æ¡†
- **å‚æ•°**:
  - `text`: è¾“å…¥çš„æ–‡æœ¬å†…å®¹ï¼Œæ”¯æŒ `${account:username}` å’Œ `${account:password}` å‚æ•°æ›¿æ¢
  - `target_selector.placeholder`: ç›®æ ‡è¾“å…¥æ¡†çš„æç¤ºæ–‡æœ¬

### 2. `checkbox` - å‹¾é€‰æ¡†æ“ä½œ
- **åŠŸèƒ½**: è‡ªåŠ¨è¯†åˆ«å¹¶å‹¾é€‰åè®®åŒæ„æ¡†
- **å‚æ•°**:
  - `target_selector.type`: å›ºå®šä¸º `"agreement_checkbox"`
- **æ™ºèƒ½è¯†åˆ«**:
  - ä¼˜å…ˆè¯†åˆ« `android.widget.CheckBox` æ§ä»¶
  - æ”¯æŒ `checkable=true` çš„å…ƒç´ 
  - ä½¿ç”¨40åˆ†æƒé‡çš„ä¼˜å…ˆçº§ç®—æ³•

### 3. `click` with `type: login_button` - ç™»å½•æŒ‰é’®ç‚¹å‡»
- **åŠŸèƒ½**: è‡ªåŠ¨è¯†åˆ«å¹¶ç‚¹å‡»ç™»å½•æŒ‰é’®
- **å‚æ•°**:
  - `target_selector.type`: å›ºå®šä¸º `"login_button"`
- **æ™ºèƒ½è¯†åˆ«**:
  - è¯†åˆ«åŒ…å«"ç™»å½•"ã€"è¿›å…¥æ¸¸æˆ"ã€"ç«‹å³ç™»å½•"ç­‰æ–‡æœ¬çš„æŒ‰é’®
  - æ”¯æŒ `android.widget.Button` å’Œ `android.widget.TextView` ç±»å‹

### 4. `auto_login` - å®Œæ•´è‡ªåŠ¨ç™»å½•
- **åŠŸèƒ½**: ä¸€æ¬¡æ€§å®Œæˆæ•´ä¸ªç™»å½•æµç¨‹
- **å‚æ•°**:
  - `params.username`: ç”¨æˆ·åï¼Œæ”¯æŒå‚æ•°æ›¿æ¢
  - `params.password`: å¯†ç ï¼Œæ”¯æŒå‚æ•°æ›¿æ¢
- **æ‰§è¡Œæµç¨‹**:
  1. è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·åè¾“å…¥æ¡†å¹¶è¾“å…¥
  2. è‡ªåŠ¨è¯†åˆ«å¯†ç è¾“å…¥æ¡†å¹¶è¾“å…¥
  3. è‡ªåŠ¨è¯†åˆ«å¹¶å‹¾é€‰åè®®checkbox (å¯é€‰)
  4. è‡ªåŠ¨è¯†åˆ«å¹¶ç‚¹å‡»ç™»å½•æŒ‰é’®

## æ™ºèƒ½è¯†åˆ«ç®—æ³•

### ç”¨æˆ·åè¾“å…¥æ¡†è¯†åˆ«æ¨¡å¼
- **æ–‡æœ¬æç¤º**: è´¦å·ã€ç”¨æˆ·åã€usernameã€accountã€è¯·è¾“å…¥è´¦å·ã€è¯·è¾“å…¥æ‚¨çš„è´¦å·ã€è¯·è¾“å…¥æ‰‹æœºå·
- **Resource ID**: usernameã€accountã€loginã€phoneã€mobile
- **æ§ä»¶ç±»å‹**: android.widget.EditText

### å¯†ç è¾“å…¥æ¡†è¯†åˆ«æ¨¡å¼
- **æ–‡æœ¬æç¤º**: å¯†ç ã€passwordã€è¯·è¾“å…¥æ‚¨çš„å¯†ç ã€è¯·è¾“å…¥å¯†ç ã€éªŒè¯ç 
- **Resource ID**: passwordã€passã€pwd
- **æ§ä»¶ç±»å‹**: android.widget.EditText
- **ç‰¹æ®Šå±æ€§**: password=true

### Checkboxè¯†åˆ«æ¨¡å¼
- **Resource ID**: agreeã€acceptã€checkboxã€cb_agã€remember
- **æ§ä»¶ç±»å‹**: android.widget.CheckBox
- **ç‰¹æ®Šå±æ€§**: checkable=true (40åˆ†ä¼˜å…ˆæƒé‡)

### ç™»å½•æŒ‰é’®è¯†åˆ«æ¨¡å¼
- **æ–‡æœ¬å†…å®¹**: è¿›å…¥æ¸¸æˆã€ç«‹å³ç™»å½•ã€ç™»å½•ã€ç™»å…¥ã€loginã€å¼€å§‹æ¸¸æˆ
- **Resource ID**: loginã€submitã€enterã€gameã€start
- **æ§ä»¶ç±»å‹**: android.widget.Buttonã€android.widget.TextView

## è´¦å·å‚æ•°æ›¿æ¢

ç³»ç»Ÿæ”¯æŒè‡ªåŠ¨è´¦å·åˆ†é…å’Œå‚æ•°æ›¿æ¢ï¼š

- `${account:username}` â†’ è‡ªåŠ¨æ›¿æ¢ä¸ºåˆ†é…ç»™è®¾å¤‡çš„ç”¨æˆ·å
- `${account:password}` â†’ è‡ªåŠ¨æ›¿æ¢ä¸ºåˆ†é…ç»™è®¾å¤‡çš„å¯†ç 

è´¦å·é…ç½®æ–‡ä»¶ä½ç½®ï¼š`wfgame-ai-server/apps/scripts/datasets/accounts_info/accounts.txt`

## ç¤ºä¾‹æ–‡ä»¶

1. **scene1_input_steps.json** - åŸºç¡€ç™»å½•åœºæ™¯
2. **complete_login_example.json** - å®Œæ•´åˆ†æ­¥ç™»å½•ç¤ºä¾‹
3. **auto_login_example.json** - ä¸€é”®ç™»å½•ç¤ºä¾‹

## æ‰§è¡Œæ—¥å¿—

æ‰€æœ‰æ“ä½œéƒ½ä¼šè®°å½•è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—ï¼š

```json
{
  "tag": "function",
  "depth": 1,
  "time": 1749619520.123,
  "data": {
    "name": "check_checkbox",
    "call_args": {
      "target_selector": {"type": "agreement_checkbox"}
    },
    "start_time": 1749619520.123,
    "ret": {"success": true},
    "end_time": 1749619520.623,
    "desc": "å‹¾é€‰ç”¨æˆ·åè®®",
    "title": "#3 å‹¾é€‰ç”¨æˆ·åè®®"
  }
}
```

## æœ€ä½³å®è·µ

1. **ç®€å•ç™»å½•åœºæ™¯**: ä½¿ç”¨ `auto_login` ä¸€é”®å®Œæˆ
2. **å¤æ‚ç™»å½•åœºæ™¯**: ä½¿ç”¨åˆ†æ­¥æ“ä½œï¼Œä¾¿äºè°ƒè¯•å’Œæ§åˆ¶
3. **å‚æ•°æ›¿æ¢**: å§‹ç»ˆä½¿ç”¨ `${account:username}` å’Œ `${account:password}` è€Œä¸æ˜¯ç¡¬ç¼–ç 
4. **å¤‡æ³¨ä¿¡æ¯**: ä¸ºæ¯ä¸ªæ­¥éª¤æ·»åŠ æ¸…æ™°çš„ `remark` æè¿°
5. **æ—¶é—´é—´éš”**: åˆç†è®¾ç½®æ­¥éª¤é—´çš„æ—¶é—´é—´éš”

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ‰¾ä¸åˆ°è¾“å…¥æ¡†**
   - æ£€æŸ¥ `placeholder` æ˜¯å¦åŒ¹é…å®é™…ç•Œé¢
   - ä½¿ç”¨UIç»“æ„æ£€æµ‹å™¨åˆ†æç•Œé¢å…ƒç´ 

2. **Checkboxå‹¾é€‰å¤±è´¥**
   - ç¡®è®¤ç•Œé¢ä¸­å­˜åœ¨å¯å‹¾é€‰å…ƒç´ 
   - æ£€æŸ¥å…ƒç´ æ˜¯å¦æœ‰ `checkable=true` å±æ€§

3. **ç™»å½•æŒ‰é’®è¯†åˆ«å¤±è´¥**
   - ç¡®è®¤æŒ‰é’®æ–‡æœ¬åŒ…å«ç™»å½•ç›¸å…³å…³é”®è¯
   - æ£€æŸ¥æŒ‰é’®æ˜¯å¦ä¸ºå¯ç‚¹å‡»çŠ¶æ€

### è°ƒè¯•å·¥å…·

ä½¿ç”¨ `ui_structure_detector.py` åˆ†æå½“å‰ç•Œé¢ï¼š

```bash
python ui_structure_detector.py
```

è¿™å°†ç”Ÿæˆè¯¦ç»†çš„UIå…ƒç´ åˆ†ææŠ¥å‘Šï¼Œå¸®åŠ©è°ƒè¯•è¯†åˆ«é—®é¢˜ã€‚

## æ›´æ–°æ—¥å¿—

- âœ… é›†æˆæ™ºèƒ½ç™»å½•æ“ä½œå™¨çš„å…¨éƒ¨åŠŸèƒ½
- âœ… æ”¯æŒcheckboxæ™ºèƒ½è¯†åˆ«å’Œæ“ä½œ
- âœ… æ”¯æŒç™»å½•æŒ‰é’®æ™ºèƒ½è¯†åˆ«å’Œç‚¹å‡»
- âœ… æ”¯æŒå®Œæ•´è‡ªåŠ¨ç™»å½•æµç¨‹
- âœ… å®Œæ•´çš„JSONé…ç½®æ”¯æŒ
- âœ… è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—è®°å½•
- âœ… å‚æ•°æ›¿æ¢å’Œè´¦å·ç®¡ç†é›†æˆ
