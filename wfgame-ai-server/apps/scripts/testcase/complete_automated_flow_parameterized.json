{
  "meta": {
    "name": "完整游戏自动化流程 - 全参数化标准版",
    "description": "包含所有常见动作类型的标准化脚本，完全依赖enhanced_input_handler的ElementPatterns",
    "version": "2.0",
    "created_date": "2025-06-24",
    "author": "WFGameAI开发团队",
    "tags": ["完整流程", "参数化", "标准化", "ElementPatterns"]
  },
  "steps": [
    {
      "step": 1,
      "action": "delay",
      "params": {
        "seconds": 5
      },
      "remark": "等待应用启动完成"
    },
    {
      "step": 2,
      "action": "wait_if_exists",
      "class": "system-newResources",
      "polling_interval": 5000,
      "max_duration": 300,
      "confidence": 0.7,
      "remark": "等待热更新资源加载完成"
    },
    {
      "step": 3,
      "action": "click_target",
      "target_selector": {
        "type": "login_switch_button",
        "skip_if_not_found": true
      },
      "confidence": 0.8,
      "remark": "切换到账号密码登录模式（可选）"
    },
    {
      "step": 4,
      "action": "input",
      "text": "${account:username}",
      "target_selector": {
        "type": "username_field"
      },
      "confidence": 0.95,
      "remark": "输入用户名（自动识别用户名输入框）"
    },
    {
      "step": 5,
      "action": "input",
      "text": "${account:password}",
      "target_selector": {
        "type": "password_field"
      },
      "confidence": 0.95,
      "remark": "输入密码（自动识别密码输入框）"
    },
    {
      "step": 6,
      "action": "checkbox",
      "target_selector": {
        "type": "agreement_checkbox"
      },
      "confidence": 0.9,
      "remark": "勾选用户协议（自动识别协议复选框）"
    },
    {
      "step": 7,
      "action": "click_target",
      "target_selector": {
        "type": "login_button"
      },
      "confidence": 0.9,
      "remark": "点击登录按钮（自动识别登录按钮）"
    },
    {
      "step": 8,
      "action": "delay",
      "params": {
        "seconds": 3
      },
      "remark": "等待登录处理"
    },
    {
      "step": 9,
      "action": "wait_if_exists",
      "class": "system-permission",
      "polling_interval": 2000,
      "max_duration": 15,
      "confidence": 0.8,
      "remark": "等待系统权限弹窗处理"
    },
    {
      "step": 10,
      "action": "click_target",
      "target_selector": {
        "type": "skip_button",
        "skip_if_not_found": true
      },
      "confidence": 0.8,
      "remark": "跳过新手引导（如果存在）"
    },
    {
      "step": 11,
      "action": "auto_login",
      "params": {
        "username": "${account:username}",
        "password": "${account:password}"
      },
      "target_selector": {
        "type": "auto_login_flow"
      },
      "confidence": 0.9,
      "remark": "执行完整的自动登录流程（智能识别所有登录相关元素）"
    },
    {
      "step": 12,
      "action": "wait_if_exists",
      "class": "main-interface",
      "polling_interval": 5000,
      "max_duration": 30,
      "confidence": 0.85,
      "remark": "等待进入主界面"
    },
    {
      "step": 13,
      "action": "screenshot",
      "params": {
        "filename": "final_result.png"
      },
      "remark": "截取最终结果"
    }
  ],
  "config": {
    "enhanced_input_handler": {
      "enabled": true,
      "description": "使用增强输入处理器，支持智能元素识别"
    },
    "element_patterns": {
      "username_field": {
        "pattern": "USERNAME_PATTERNS",
        "description": "自动识别用户名输入框"
      },
      "password_field": {
        "pattern": "PASSWORD_PATTERNS",
        "description": "自动识别密码输入框"
      },
      "agreement_checkbox": {
        "pattern": "CHECKBOX_PATTERNS",
        "description": "自动识别协议勾选框"
      },
      "login_button": {
        "pattern": "LOGIN_BUTTON_PATTERNS",
        "description": "自动识别登录按钮"
      },
      "skip_button": {
        "pattern": "SKIP_BUTTON_PATTERNS",
        "description": "自动识别跳过按钮"
      },
      "login_switch_button": {
        "pattern": "LOGIN_SWITCH_BUTTON_PATTERNS",
        "description": "自动识别登录方式切换按钮"
      }
    },
    "smart_features": {
      "account_allocation": {
        "enabled": true,
        "description": "智能账号分配，自动为设备分配可用账号"
      },
      "element_retry": {
        "enabled": true,
        "description": "元素查找失败时自动重试不同策略"
      },
      "fallback_detection": {
        "enabled": true,
        "description": "使用备选检测策略确保元素识别成功率"
      }
    }
  }
}
