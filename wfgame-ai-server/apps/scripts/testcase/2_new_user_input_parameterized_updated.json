{
  "meta": {
    "name": "新用户注册登录完整流程 - 参数化版本 - 更新版",
    "description": "使用新的3个关键功能和标准化参数的脚本，完全依赖enhanced_input_handler内置的ElementPatterns",
    "version": "3.0",
    "updated_date": "2025-01-10",
    "author": "WFGameAI开发团队",
    "tags": ["登录", "注册", "新用户", "参数化", "标准化", "3个关键功能"]
  },
  "steps": [
    {
      "step": 0.5,
      "detection_method": "ai",
      "action": "wait_for_stable",
      "duration": 5,
      "max_wait": 10,
      "remark": "等待应用启动后界面稳定，避免热更新导致的黑屏影响检测"
    },
    {
      "step": 1,
      "action": "wait_if_exists",
      "yolo_class": "system-newResources",
      "polling_interval": 5000,
      "max_duration": 300,
      "confidence": 0.7135645747184753,
      "remark": "判断启动APP后是否出现热更资源图标，如果存在则需要等待新资源加载完成"
    },
    {
      "step": 2,
      "detection_method": "ui",
      "action": "wait_for_appearance",
      "ui_type": "login_switch_button",
      "timeout": 8,
      "remark": "等待登录切换按钮出现（如果存在其他登录方式选项）"
    },
    {
      "step": 2.5,
      "detection_method": "ui",
      "action": "retry_until_success",
      "retry_action": "click",
      "ui_type": "login_switch_button",
      "max_retries": 3,
      "retry_interval": 1,
      "remark": "重试切换到账号密码登录模式（如果存在其他登录方式选项）"
    },
    {
      "step": 3,
      "detection_method": "ai",
      "action": "wait_for_stable",
      "duration": 2,
      "max_wait": 5,
      "remark": "等待登录方式切换完成，界面稳定后再进行下一步操作"
    },
    {
      "step": 4,
      "detection_method": "ui",
      "action": "wait_for_appearance",
      "ui_type": "username_field",
      "timeout": 8,
      "remark": "等待用户名输入框出现"
    },
    {
      "step": 5,
      "detection_method": "ui",
      "action": "retry_until_success",
      "retry_action": "input",
      "text": "${account:username}",
      "ui_type": "username_field",
      "max_retries": 3,
      "retry_interval": 1,
      "remark": "重试输入登录用户名（使用USERNAME_PATTERNS自动识别）"
    },
    {
      "step": 6,
      "detection_method": "ui",
      "action": "retry_until_success",
      "retry_action": "input",
      "text": "${account:password}",
      "ui_type": "password_field",
      "max_retries": 3,
      "retry_interval": 1,
      "remark": "重试输入登录密码（使用PASSWORD_PATTERNS自动识别）"
    },
    {
      "step": 7,
      "detection_method": "ui",
      "action": "retry_until_success",
      "retry_action": "checkbox",
      "ui_type": "agreement_checkbox",
      "max_retries": 3,
      "retry_interval": 1,
      "remark": "重试勾选用户协议（使用CHECKBOX_PATTERNS自动识别）"
    },
    {
      "step": 8,
      "detection_method": "ui",
      "action": "retry_until_success",
      "retry_action": "click",
      "ui_type": "login_button",
      "max_retries": 5,
      "retry_strategy": "exponential",
      "initial_delay": 1,
      "max_delay": 5,
      "verify_success": true,
      "remark": "重试点击登录按钮（使用LOGIN_BUTTON_PATTERNS自动识别）"
    },
    {
      "step": 9,
      "detection_method": "ai",
      "action": "wait_for_stable",
      "duration": 3,
      "max_wait": 8,
      "remark": "等待登录处理完成"
    },
    {
      "step": 10,
      "action": "wait_if_exists",
      "yolo_class": "system-permission",
      "polling_interval": 2000,
      "max_duration": 15,
      "confidence": 0.8,
      "remark": "检测是否出现系统权限弹窗，如存在则等待权限管理器处理"
    },
    {
      "step": 11,
      "action": "wait_if_exists",
      "yolo_class": "newbie-guide",
      "polling_interval": 3000,
      "max_duration": 20,
      "confidence": 0.75,
      "remark": "检测新手引导界面，如存在则等待引导完成"
    },
    {
      "step": 12,
      "detection_method": "ui",
      "action": "wait_for_appearance",
      "ui_type": "skip_button",
      "timeout": 5,
      "fallback_yolo_class": "system-skip",
      "remark": "等待跳过按钮出现（如果存在跳过按钮）"
    },
    {
      "step": 13,
      "detection_method": "ui",
      "action": "retry_until_success",
      "retry_action": "click",
      "ui_type": "skip_button",
      "max_retries": 3,
      "retry_interval": 1,
      "fallback_yolo_class": "system-skip",
      "remark": "尝试跳过新手引导（如果存在跳过按钮）"
    },
    {
      "step": 14,
      "action": "wait_if_exists",
      "yolo_class": "main-interface",
      "polling_interval": 5000,
      "max_duration": 30,
      "confidence": 0.85,
      "remark": "等待进入游戏主界面"
    },
    {
      "step": 15,
      "detection_method": "ai",
      "action": "wait_for_stable",
      "duration": 2,
      "max_wait": 5,
      "remark": "主界面稳定等待"
    }
  ]
}
