import{a as T,l as R,d as b}from"./team-e495a6d3.js";import{s as m}from"./request-28f7529e.js";import{r as o}from"./index-41f05ddf.js";function S(c){const a=c.editRef,h=c.teamTableRef,l=o([]),i=o(!1),g=o(!0);async function d(e="all",t){await m({apiFunc:e==="all"?T:R,onBeforeRequest:()=>{i.value=!0},onSucceed:u=>{l.value=u},onCompleted:()=>{i.value=!1,typeof t=="function"&&t(l.value)}})}function p(e){a.value.fetchData(),e.id?a.value.showEdit(e):a.value.showEdit()}function r(e){e.id&&(a.value.fetchData(),a.value.showEditWithParent(e.id))}async function v(e){await m({apiFunc:b,apiParams:{id:e.id},enableSucceedMsg:!0,succeedMsgContent:"删除成功！",onSucceed:()=>{d()}})}function f(e,t){var s;const u=(e==null?void 0:e.length)||0;for(let n=0;n<u;n++)h.value.toggleRowExpansion(e[n],t),(s=e[n].children)!=null&&s.length&&f(e[n].children,t)}function E(e){f(l.value,e)}return{dataList:l,loading:i,defaultExpandAll:g,handleEdit:p,handleEditChild:r,handleDelete:v,fetchData:d,toggleTableExpansion:E}}export{S as useSysTeamManagement};
