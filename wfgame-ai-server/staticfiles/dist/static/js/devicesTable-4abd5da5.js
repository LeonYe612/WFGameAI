import{g as J,j as M,o as K,q as O,r as R,d as T,v as L}from"./index-0964a6d0.js";import W from"./deviceReportDialog-a95ab143.js";import X from"./usbCheckDialog-f5c82ac7.js";import{m as Y,r as h,d as Z,A as p,j as r,k as m,l as o,z as l,x as u,I as n,B as a,y as i,R as w,u as k,F as ee,p as te,M as se,_ as le}from"./index-41f05ddf.js";import"./devices-b4e56127.js";import"./request-28f7529e.js";const oe={key:0,class:"flex items-center justify-between mb-4"},ne={class:"flex items-center space-x-4"},ae={class:"flex items-center space-x-2"},ie={key:1,class:"text-center py-12"},de={key:1,class:"text-gray-400"},re={class:"flex space-x-1"},ue={key:5,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},pe={class:"flex items-center justify-between"},ce={class:"flex items-center"},fe={class:"font-medium"},_e={class:"space-y-2 text-sm"},me={class:"flex justify-between"},ye={class:"flex justify-between"},be={class:"flex justify-between"},ve={class:"flex justify-between"},ge={key:1},we={class:"flex justify-between"},ke={class:"flex justify-between"},Ce={class:"flex justify-between"},xe={class:"flex justify-between"},De=Y({name:"DevicesTable",__name:"devicesTable",props:{devices:{},loading:{type:Boolean},error:{},stats:{},searchQuery:{},statusFilter:{},viewMode:{},filteredSortedDevices:{}},emits:["connect","generate-report","refresh","update:search-query","update:status-filter","update:view-mode"],setup(U,{emit:q}){const y=U,C=q,j=h(),$=h(),x=h("device_id"),D=h("asc"),V=s=>({online:"在线",offline:"离线",device:"已连接",busy:"忙碌",unauthorized:"未授权"})[s]||s,B=s=>({online:"success",device:"success",offline:"danger",busy:"warning",unauthorized:"warning"})[s]||"info",b=s=>{x.value===s?D.value=D.value==="asc"?"desc":"asc":(x.value=s,D.value="asc")},S=Z(()=>{let s=y.devices;if(y.searchQuery){const e=y.searchQuery.toLowerCase();s=s.filter(_=>{var c,v,d;return((c=_.device_id)==null?void 0:c.toLowerCase().includes(e))||((v=_.brand)==null?void 0:v.toLowerCase().includes(e))||((d=_.model)==null?void 0:d.toLowerCase().includes(e))})}return y.statusFilter&&(s=s.filter(e=>e.status===y.statusFilter)),x.value&&(s=[...s].sort((e,_)=>{const c=e[x.value]||"",v=_[x.value]||"",d=c.toString().localeCompare(v.toString());return D.value==="asc"?d:-d})),s}),F=s=>{C("connect",s.id||s.device_id)},I=s=>{var e;(e=j.value)==null||e.showDialog(s)},N=()=>{const s=y.viewMode==="table"?"card":"table";C("update:view-mode",s)},Q=()=>{var s;(s=$.value)==null||s.showDialog()};return(s,e)=>{const _=p("el-input"),c=p("el-option"),v=p("el-select"),d=p("el-button"),A=p("el-icon"),P=p("el-alert"),E=p("el-empty"),g=p("el-tag"),f=p("el-table-column"),G=p("el-table"),H=p("el-card");return r(),m("div",null,[!s.loading&&s.devices.length>0?(r(),m("div",oe,[o("div",ne,[l(_,{"model-value":s.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=t=>C("update:search-query",t)),placeholder:"搜索品牌、型号、设备ID...","prefix-icon":u(J),style:{width:"300px"},clearable:""},null,8,["model-value","prefix-icon"]),l(v,{"model-value":s.statusFilter,"onUpdate:modelValue":e[1]||(e[1]=t=>C("update:status-filter",t)),placeholder:"所有状态",style:{width:"150px"},clearable:""},{default:n(()=>[l(c,{label:"在线",value:"online"}),l(c,{label:"已连接",value:"device"}),l(c,{label:"离线",value:"offline"}),l(c,{label:"未授权",value:"unauthorized"})]),_:1},8,["model-value"]),l(d,{icon:u(M),type:"warning",onClick:Q},{default:n(()=>[...e[9]||(e[9]=[a(" USB检查 ",-1)])]),_:1},8,["icon"])]),o("div",ae,[l(d,{icon:s.viewMode==="table"?u(K):u(O),onClick:N},{default:n(()=>[a(i(s.viewMode==="table"?"卡片视图":"表格视图"),1)]),_:1},8,["icon"]),l(d,{icon:u(R),type:"primary",onClick:e[2]||(e[2]=t=>C("refresh"))},{default:n(()=>[...e[10]||(e[10]=[a(" 刷新 ",-1)])]),_:1},8,["icon"])])])):w("",!0),s.loading?(r(),m("div",ie,[l(A,{class:"animate-spin text-4xl text-primary mb-4"},{default:n(()=>[l(u(R))]),_:1}),e[11]||(e[11]=o("p",{class:"text-gray-500"},"正在加载设备列表...",-1))])):w("",!0),s.error?(r(),k(P,{key:2,title:s.error,type:"error",class:"mb-4","show-icon":""},null,8,["title"])):w("",!0),!s.loading&&s.devices.length===0?(r(),k(E,{key:3,description:"暂无设备，请检查设备连接状态",class:"py-12"})):w("",!0),!s.loading&&s.devices.length>0&&s.viewMode==="table"?(r(),k(G,{key:4,data:S.value,stripe:"",style:{width:"100%"},class:"devices-table"},{default:n(()=>[l(f,{prop:"device_id",label:"设备ID",width:"120",sortable:"",onClick:e[3]||(e[3]=t=>b("device_id"))},{default:n(({row:t})=>[l(g,{type:"info"},{default:n(()=>[a(i(t.device_id),1)]),_:2},1024)]),_:1}),l(f,{prop:"brand",label:"品牌",width:"100",sortable:"",onClick:e[4]||(e[4]=t=>b("brand"))}),l(f,{prop:"model",label:"型号",width:"150",sortable:"",onClick:e[5]||(e[5]=t=>b("model"))}),l(f,{prop:"android_version",label:"系统版本",width:"120",sortable:"",onClick:e[6]||(e[6]=t=>b("android_version"))},{default:n(({row:t})=>[t.android_version?(r(),k(g,{key:0,size:"small"},{default:n(()=>[a(i(t.android_version),1)]),_:2},1024)):(r(),m("span",de,"-"))]),_:1}),l(f,{prop:"occupied_personnel",label:"占用人员",width:"120",sortable:"",onClick:e[7]||(e[7]=t=>b("occupied_personnel"))},{default:n(({row:t})=>[a(i(t.occupied_personnel||"-"),1)]),_:1}),l(f,{prop:"status",label:"状态",width:"100",sortable:"",onClick:e[8]||(e[8]=t=>b("status"))},{default:n(({row:t})=>[l(g,{type:B(t.status)},{default:n(()=>[a(i(V(t.status)),1)]),_:2},1032,["type"])]),_:1}),l(f,{prop:"ip_address",label:"IP地址",width:"140"},{default:n(({row:t})=>[a(i(t.ip_address||"-"),1)]),_:1}),l(f,{prop:"last_online",label:"最后在线",width:"120"},{default:n(({row:t})=>[a(i(t.last_online||"刚刚"),1)]),_:1}),l(f,{label:"操作",width:"200",fixed:"right"},{default:n(({row:t})=>[o("div",re,[l(d,{size:"small",type:"success",icon:u(M),disabled:t.status==="online"||t.status==="device",onClick:z=>F(t)},{default:n(()=>[...e[12]||(e[12]=[a(" 连接 ",-1)])]),_:1},8,["icon","disabled","onClick"]),l(d,{size:"small",type:"primary",icon:u(T),onClick:z=>I(t)},{default:n(()=>[...e[13]||(e[13]=[a(" 报告 ",-1)])]),_:1},8,["icon","onClick"]),l(d,{size:"small",type:"info",icon:u(L),disabled:""},{default:n(()=>[...e[14]||(e[14]=[a(" 屏幕 ",-1)])]),_:1},8,["icon"])])]),_:1})]),_:1},8,["data"])):w("",!0),!s.loading&&s.devices.length>0&&s.viewMode==="card"?(r(),m("div",ue,[(r(!0),m(ee,null,te(S.value,t=>(r(),k(H,{key:t.id||t.device_id,shadow:"hover",class:"device-card"},{header:n(()=>[o("div",pe,[o("div",ce,[o("div",{class:se(["w-3 h-3 rounded-full mr-2",{"bg-green-500":t.status==="online"||t.status==="device","bg-red-500":t.status==="offline","bg-yellow-500":t.status==="busy","bg-orange-500":t.status==="unauthorized"}])},null,2),o("span",fe,i(t.brand)+" "+i(t.model),1)]),l(g,{type:B(t.status),size:"small"},{default:n(()=>[a(i(V(t.status)),1)]),_:2},1032,["type"])])]),footer:n(()=>[o("div",xe,[l(d,{size:"small",type:"success",icon:u(M),disabled:t.status==="online"||t.status==="device",onClick:z=>F(t)},{default:n(()=>[...e[22]||(e[22]=[a(" 连接 ",-1)])]),_:1},8,["icon","disabled","onClick"]),l(d,{size:"small",type:"primary",icon:u(T),onClick:z=>I(t)},{default:n(()=>[...e[23]||(e[23]=[a(" 报告 ",-1)])]),_:1},8,["icon","onClick"]),l(d,{size:"small",type:"info",icon:u(L),disabled:""},{default:n(()=>[...e[24]||(e[24]=[a(" 屏幕 ",-1)])]),_:1},8,["icon"])])]),default:n(()=>[o("div",_e,[o("div",me,[e[15]||(e[15]=o("span",{class:"text-gray-500"},"设备ID:",-1)),l(g,{type:"info",size:"small"},{default:n(()=>[a(i(t.device_id),1)]),_:2},1024)]),o("div",ye,[e[16]||(e[16]=o("span",{class:"text-gray-500"},"品牌:",-1)),o("span",null,i(t.brand||"-"),1)]),o("div",be,[e[17]||(e[17]=o("span",{class:"text-gray-500"},"型号:",-1)),o("span",null,i(t.model||"-"),1)]),o("div",ve,[e[18]||(e[18]=o("span",{class:"text-gray-500"},"系统版本:",-1)),t.android_version?(r(),k(g,{key:0,size:"small"},{default:n(()=>[a(i(t.android_version),1)]),_:2},1024)):(r(),m("span",ge,"-"))]),o("div",we,[e[19]||(e[19]=o("span",{class:"text-gray-500"},"占用人员:",-1)),o("span",null,i(t.occupied_personnel||"-"),1)]),o("div",ke,[e[20]||(e[20]=o("span",{class:"text-gray-500"},"IP地址:",-1)),o("span",null,i(t.ip_address||"-"),1)]),o("div",Ce,[e[21]||(e[21]=o("span",{class:"text-gray-500"},"最后在线:",-1)),o("span",null,i(t.last_online||"刚刚"),1)])])]),_:2},1024))),128))])):w("",!0),l(W,{ref_key:"reportDialogRef",ref:j},null,512),l(X,{ref_key:"usbDialogRef",ref:$},null,512)])}}});const Be=le(De,[["__scopeId","data-v-969c012b"]]);export{Be as default};
