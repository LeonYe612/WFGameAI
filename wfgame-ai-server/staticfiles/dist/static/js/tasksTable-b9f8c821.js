import{i as j,N as E,r as G,J as R,G as F,L as H,m as J,H as q}from"./index-ccf167da.js";import{T as S}from"./tasks-a75ce524.js";import{t as k,a as T}from"./rules-dce1be60.js";import{m as K,r as M,w as O,A as d,j as _,k as Q,z as e,I as t,l as m,y as c,u as f,B as u,R as W,x as n,v as N,_ as X}from"./index-fbbdd03e.js";const Y={class:"tasks-table"},Z={class:"task-name"},ee={class:"task-type"},te={class:"device-info"},ae={class:"action-buttons"},ne={class:"pagination-wrapper"},le=K({__name:"tasksTable",props:{data:{},loading:{type:Boolean,default:!1},pagination:{}},emits:["action","page-change","size-change"],setup(x,{emit:B}){const C=x,h=B,r=M({...C.pagination});O(()=>C.pagination,l=>{r.value={...l}},{deep:!0});const g=(l,s)=>{h("action",l,s)},D=l=>{},I=l=>{h("page-change",l)},P=l=>{h("size-change",l)},V=l=>l?new Date(l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"--";return(l,s)=>{const b=d("el-tag"),p=d("el-table-column"),i=d("el-icon"),v=d("el-button"),z=d("el-dropdown-item"),$=d("el-dropdown-menu"),A=d("el-dropdown"),L=d("el-table"),U=d("el-pagination");return _(),Q("div",Y,[e(L,{data:l.data,loading:l.loading,stripe:"",style:{width:"100%"},onSortChange:D},{default:t(()=>[e(p,{prop:"name",label:"任务名称","min-width":"200",sortable:""},{default:t(({row:a})=>[m("div",Z,[m("span",null,c(a.name),1),a.description?(_(),f(b,{key:0,size:"small",type:"info",class:"description-tag"},{default:t(()=>[u(c(a.description),1)]),_:2},1024)):W("",!0)])]),_:1}),e(p,{prop:"status",label:"状态",width:"120",align:"center"},{default:t(({row:a})=>{var o;return[e(b,{type:(o=n(k)[a.status])==null?void 0:o.type,size:"small"},{default:t(()=>{var y;return[e(i,{class:"status-icon"},{default:t(()=>{var w;return[(_(),f(N((w=n(k)[a.status])==null?void 0:w.icon)))]}),_:2},1024),u(" "+c((y=n(k)[a.status])==null?void 0:y.label),1)]}),_:2},1032,["type"])]}),_:1}),e(p,{prop:"type",label:"类型",width:"120",align:"center"},{default:t(({row:a})=>{var o;return[m("div",ee,[e(i,null,{default:t(()=>{var y;return[(_(),f(N((y=n(T)[a.type])==null?void 0:y.icon)))]}),_:2},1024),u(" "+c((o=n(T)[a.type])==null?void 0:o.label),1)])]}),_:1}),e(p,{prop:"device",label:"设备",width:"180"},{default:t(({row:a})=>[m("div",te,[e(i,null,{default:t(()=>[e(n(j))]),_:1}),u(" "+c(a.device),1)])]),_:1}),e(p,{prop:"startTime",label:"开始时间",width:"160",sortable:""},{default:t(({row:a})=>[u(c(V(a.startTime)),1)]),_:1}),e(p,{prop:"duration",label:"耗时",width:"120",align:"center"},{default:t(({row:a})=>[u(c(a.duration||"--"),1)]),_:1}),e(p,{label:"操作",width:"200",fixed:"right",align:"center"},{default:t(({row:a})=>[m("div",ae,[a.status===n(S).RUNNING?(_(),f(v,{key:0,type:"danger",size:"small",onClick:o=>g("stop",a)},{default:t(()=>[e(i,null,{default:t(()=>[e(n(E))]),_:1})]),_:1},8,["onClick"])):a.status===n(S).FAILED?(_(),f(v,{key:1,type:"warning",size:"small",onClick:o=>g("restart",a)},{default:t(()=>[e(i,null,{default:t(()=>[e(n(G))]),_:1})]),_:1},8,["onClick"])):(_(),f(v,{key:2,type:"primary",size:"small",onClick:o=>g("start",a)},{default:t(()=>[e(i,null,{default:t(()=>[e(n(R))]),_:1})]),_:1},8,["onClick"])),e(v,{type:"info",size:"small",onClick:o=>g("view",a)},{default:t(()=>[e(i,null,{default:t(()=>[e(n(F))]),_:1})]),_:1},8,["onClick"]),e(A,{onCommand:o=>g(o,a)},{dropdown:t(()=>[e($,null,{default:t(()=>[e(z,{command:"duplicate"},{default:t(()=>[e(i,null,{default:t(()=>[e(n(H))]),_:1}),s[2]||(s[2]=u(" 复制任务 ",-1))]),_:1}),e(z,{command:"delete",divided:""},{default:t(()=>[e(i,null,{default:t(()=>[e(n(J))]),_:1}),s[3]||(s[3]=u(" 删除任务 ",-1))]),_:1})]),_:1})]),default:t(()=>[e(v,{size:"small",type:"default"},{default:t(()=>[e(i,null,{default:t(()=>[e(n(q))]),_:1})]),_:1})]),_:1},8,["onCommand"])])]),_:1})]),_:1},8,["data","loading"]),m("div",ne,[e(U,{"current-page":r.value.currentPage,"onUpdate:currentPage":s[0]||(s[0]=a=>r.value.currentPage=a),"page-size":r.value.pageSize,"onUpdate:pageSize":s[1]||(s[1]=a=>r.value.pageSize=a),total:r.value.total,"page-sizes":[10,20,50,100],background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:P,onCurrentChange:I},null,8,["current-page","page-size","total"])])])}}});const ue=X(le,[["__scopeId","data-v-7f5c9fea"]]);export{ue as default};
