import{d as I,t as v,e as x}from"./enums-b2002ef1.js";import{a$ as D,l as w,r as T,w as Y,z as p,h as z,q as B,H as s,y as t,k as m,x as c,v as i,A as n,_ as C}from"./index-e046f3d2.js";import{a as E}from"./ocr-397e26db.js";import{s as H}from"./request-d2ecd641.js";const N=(u,r,a)=>{if(a||(a="/"),u==null||u=="")return a;r||(r="YYYY-MM-DD HH:mm:ss");const _=D(new Date(u));return _.year()==1||_.year()==0?a:_.format(r)},O={class:"font-bold"},V={class:"source-info"},$=w({__name:"OcrTaskInfo",props:{taskId:{}},setup(u){const r=u,a=T(null),_=l=>(l==null?void 0:l.source_type)==="git"?`${l==null?void 0:l.git_repository_url} (${l==null?void 0:l.git_branch})`:"文件上传",y=async()=>{if(r.taskId)try{const l=await H({apiFunc:E.get,apiParams:r.taskId});a.value=(l==null?void 0:l.data)||null}catch(l){console.error(l)}};return Y(()=>r.taskId,l=>{l?y():a.value=null},{immediate:!0}),(l,q)=>{const o=p("el-descriptions-item"),b=p("el-tag"),g=p("el-descriptions"),h=p("el-card");return z(),B(h,{class:"task-info-card"},{default:s(()=>[t(g,{title:"任务信息",column:1,border:""},{default:s(()=>[t(o,{label:"任务ID","label-class-name":"desc-label",width:"120px"},{default:s(()=>{var e;return[m("span",O,c(((e=a.value)==null?void 0:e.id)||"-"),1)]}),_:1}),t(o,{label:"状态","label-class-name":"desc-label"},{default:s(()=>{var e,d;return[t(b,{type:(d=i(I)(i(v),(e=a.value)==null?void 0:e.status))==null?void 0:d.type,size:"small"},{default:s(()=>{var f;return[n(c(i(x)(i(v),(f=a.value)==null?void 0:f.status)),1)]}),_:1},8,["type"])]}),_:1}),t(o,{label:"数据来源","label-class-name":"desc-label"},{default:s(()=>{var e;return[m("div",V,[t(b,{type:((e=a.value)==null?void 0:e.source_type)==="git"?"success":"info",size:"small",class:"source-type-tag"},{default:s(()=>{var d;return[n(c(((d=a.value)==null?void 0:d.source_type)==="git"?"Git":"上传"),1)]}),_:1},8,["type"]),m("span",null,c(_(a.value)),1)])]}),_:1}),t(o,{label:"耗时","label-class-name":"desc-label"},{default:s(()=>{var e;return[n(c(((e=a.value)==null?void 0:e.duration)||"-"),1)]}),_:1}),t(o,{label:"图片总数","label-class-name":"desc-label"},{default:s(()=>{var e;return[n(c((e=a.value)==null?void 0:e.total_images),1)]}),_:1}),t(o,{label:"命中数","label-class-name":"desc-label"},{default:s(()=>{var e;return[n(c((e=a.value)==null?void 0:e.matched_images),1)]}),_:1}),t(o,{label:"匹配率","label-class-name":"desc-label"},{default:s(()=>{var e;return[n(c(((e=a.value)==null?void 0:e.match_rate)||0)+"%",1)]}),_:1}),t(o,{label:"创建者","label-class-name":"desc-label"},{default:s(()=>{var e;return[n(c(((e=a.value)==null?void 0:e.created_by)||"-"),1)]}),_:1}),t(o,{label:"创建时间","label-class-name":"desc-label"},{default:s(()=>{var e;return[n(c(i(N)((e=a.value)==null?void 0:e.created_at)),1)]}),_:1}),t(o,{label:"备注",span:2,"label-class-name":"desc-label"},{default:s(()=>{var e;return[n(c(((e=a.value)==null?void 0:e.remark)||"-"),1)]}),_:1})]),_:1})]),_:1})}}});const F=C($,[["__scopeId","data-v-11ab773c"]]);export{F as default};
