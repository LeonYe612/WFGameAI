import{d as w,n as I}from"./index-8ca571cf.js";import{g as q}from"./devices-fe5d6e0e.js";import{s as F}from"./request-d2ecd641.js";import{l as j,r as m,z as i,N as M,h as d,q as O,H as t,k as e,y as o,A as f,v as h,O as z,j as r,x as _,Q as g,aF as A,ah as E,ai as H,_ as J}from"./index-e046f3d2.js";const l=u=>(E("data-v-d2a6d016"),u=u(),H(),u),P={class:"device-report-content"},Q={key:0,class:"space-y-4"},T={class:"flex items-center"},U=l(()=>e("span",{class:"font-medium"},"报告信息",-1)),$={class:"grid grid-cols-2 gap-4 text-sm"},G=l(()=>e("span",{class:"text-gray-500"},"设备ID: ",-1)),K=l(()=>e("span",{class:"text-gray-500"},"生成时间: ",-1)),L={key:0},W=l(()=>e("span",{class:"text-gray-500"},"设备品牌: ",-1)),X={key:1},Y=l(()=>e("span",{class:"text-gray-500"},"设备型号: ",-1)),Z=l(()=>e("span",{class:"font-medium"},"报告详情",-1)),ee={class:"report-data"},te={class:"bg-gray-50 p-4 rounded-lg text-sm overflow-auto max-h-96"},ae={key:1,class:"text-center py-12"},se=l(()=>e("p",{class:"text-gray-500"},"正在生成设备报告...",-1)),oe={class:"flex justify-end space-x-2"},le=j({name:"DeviceReportDialog",__name:"deviceReportDialog",setup(u,{expose:C}){const p=m(!1),n=m(!1),a=m(null),s=m(null),R=c=>{a.value=c||null,s.value=null,p.value=!0,y()},y=async()=>{var c;await F({apiFunc:q,apiParams:(c=a.value)==null?void 0:c.device_id,enableSucceedMsg:!0,succeedMsgContent:"设备报告生成成功！",onBeforeRequest:()=>{n.value=!0},onSucceed:v=>{s.value=v},onFailed:()=>{A("生成设备报告失败",{type:"error"})},onCompleted:()=>{n.value=!1}})},x=()=>{p.value=!1,a.value=null,s.value=null};return C({showDialog:R}),(c,v)=>{const D=i("el-icon"),V=i("el-tag"),b=i("el-card"),k=i("el-button"),S=i("el-dialog"),N=M("loading");return d(),O(S,{modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=B=>p.value=B),title:a.value?`${a.value.device_id} 设备报告`:"全设备报告",width:"800px",draggable:!0,onClose:x},{footer:t(()=>[e("div",oe,[o(k,{onClick:x},{default:t(()=>[f("关闭")]),_:1}),o(k,{type:"primary",icon:h(w),loading:n.value,onClick:y},{default:t(()=>[f(" 重新生成 ")]),_:1},8,["icon","loading"])])]),default:t(()=>[z((d(),r("div",P,[!n.value&&s.value?(d(),r("div",Q,[o(b,{shadow:"never",class:"border"},{header:t(()=>[e("div",T,[o(D,{class:"mr-2"},{default:t(()=>[o(h(w))]),_:1}),U])]),default:t(()=>[e("div",$,[e("div",null,[G,o(V,{type:"info"},{default:t(()=>[f(_(s.value.device_id),1)]),_:1})]),e("div",null,[K,e("span",null,_(s.value.generated_at),1)]),a.value?(d(),r("div",L,[W,e("span",null,_(a.value.brand||"-"),1)])):g("",!0),a.value?(d(),r("div",X,[Y,e("span",null,_(a.value.model||"-"),1)])):g("",!0)])]),_:1}),o(b,{shadow:"never",class:"border"},{header:t(()=>[Z]),default:t(()=>[e("div",ee,[e("pre",te,_(typeof s.value.report_data=="string"?s.value.report_data:JSON.stringify(s.value.report_data,null,2)),1)])]),_:1})])):g("",!0),n.value?(d(),r("div",ae,[o(D,{class:"animate-spin text-4xl text-primary mb-4"},{default:t(()=>[o(h(I))]),_:1}),se])):g("",!0)])),[[N,n.value]])]),_:1},8,["modelValue","title"])}}});const re=J(le,[["__scopeId","data-v-d2a6d016"]]);export{re as default};
