import{g as J,j as S,o as K,q as O,r as R,d as q,v as Q}from"./index-8ca571cf.js";import W from"./deviceReportDialog-3d4556c4.js";import X from"./usbCheckDialog-54ae9605.js";import{l as Y,r as j,c as Z,z as u,h as r,j as m,k as o,y as s,v as c,H as a,A as n,x as i,Q as w,q as k,F as ee,m as te,L as se,ah as le,ai as oe,_ as ae}from"./index-e046f3d2.js";import"./devices-fe5d6e0e.js";import"./request-d2ecd641.js";const f=C=>(le("data-v-969c012b"),C=C(),oe(),C),ne={key:0,class:"flex items-center justify-between mb-4"},ie={class:"flex items-center space-x-4"},de={class:"flex items-center space-x-2"},re={key:1,class:"text-center py-12"},ce=f(()=>o("p",{class:"text-gray-500"},"正在加载设备列表...",-1)),ue={key:1,class:"text-gray-400"},pe={class:"flex space-x-1"},_e={key:5,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},fe={class:"flex items-center justify-between"},ye={class:"flex items-center"},me={class:"font-medium"},ve={class:"space-y-2 text-sm"},be={class:"flex justify-between"},he=f(()=>o("span",{class:"text-gray-500"},"设备ID:",-1)),ge={class:"flex justify-between"},we=f(()=>o("span",{class:"text-gray-500"},"品牌:",-1)),ke={class:"flex justify-between"},Ce=f(()=>o("span",{class:"text-gray-500"},"型号:",-1)),xe={class:"flex justify-between"},De=f(()=>o("span",{class:"text-gray-500"},"系统版本:",-1)),ze={key:1},je={class:"flex justify-between"},Me=f(()=>o("span",{class:"text-gray-500"},"占用人员:",-1)),Se={class:"flex justify-between"},$e=f(()=>o("span",{class:"text-gray-500"},"IP地址:",-1)),Ie={class:"flex justify-between"},Ve=f(()=>o("span",{class:"text-gray-500"},"最后在线:",-1)),Be={class:"flex justify-between"},Fe=Y({name:"DevicesTable",__name:"devicesTable",props:{devices:{},loading:{type:Boolean},error:{},stats:{},searchQuery:{},statusFilter:{},viewMode:{},filteredSortedDevices:{}},emits:["connect","generate-report","refresh","update:search-query","update:status-filter","update:view-mode"],setup(C,{emit:x}){const v=C,$=j(),I=j(),D=j("device_id"),z=j("asc"),V=t=>({online:"在线",offline:"离线",device:"已连接",busy:"忙碌",unauthorized:"未授权"})[t]||t,B=t=>({online:"success",device:"success",offline:"danger",busy:"warning",unauthorized:"warning"})[t]||"info",b=t=>{D.value===t?z.value=z.value==="asc"?"desc":"asc":(D.value=t,z.value="asc")},F=Z(()=>{let t=v.devices;if(v.searchQuery){const l=v.searchQuery.toLowerCase();t=t.filter(y=>{var p,h,d;return((p=y.device_id)==null?void 0:p.toLowerCase().includes(l))||((h=y.brand)==null?void 0:h.toLowerCase().includes(l))||((d=y.model)==null?void 0:d.toLowerCase().includes(l))})}return v.statusFilter&&(t=t.filter(l=>l.status===v.statusFilter)),D.value&&(t=[...t].sort((l,y)=>{const p=l[D.value]||"",h=y[D.value]||"",d=p.toString().localeCompare(h.toString());return z.value==="asc"?d:-d})),t}),T=t=>{x("connect",t.id||t.device_id)},L=t=>{var l;(l=$.value)==null||l.showDialog(t)},U=()=>{const t=v.viewMode==="table"?"card":"table";x("update:view-mode",t)},N=()=>{var t;(t=I.value)==null||t.showDialog()};return(t,l)=>{const y=u("el-input"),p=u("el-option"),h=u("el-select"),d=u("el-button"),A=u("el-icon"),P=u("el-alert"),E=u("el-empty"),g=u("el-tag"),_=u("el-table-column"),G=u("el-table"),H=u("el-card");return r(),m("div",null,[!t.loading&&t.devices.length>0?(r(),m("div",ne,[o("div",ie,[s(y,{"model-value":t.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=e=>x("update:search-query",e)),placeholder:"搜索品牌、型号、设备ID...","prefix-icon":c(J),style:{width:"300px"},clearable:""},null,8,["model-value","prefix-icon"]),s(h,{"model-value":t.statusFilter,"onUpdate:modelValue":l[1]||(l[1]=e=>x("update:status-filter",e)),placeholder:"所有状态",style:{width:"150px"},clearable:""},{default:a(()=>[s(p,{label:"在线",value:"online"}),s(p,{label:"已连接",value:"device"}),s(p,{label:"离线",value:"offline"}),s(p,{label:"未授权",value:"unauthorized"})]),_:1},8,["model-value"]),s(d,{icon:c(S),type:"warning",onClick:N},{default:a(()=>[n(" USB检查 ")]),_:1},8,["icon"])]),o("div",de,[s(d,{icon:t.viewMode==="table"?c(K):c(O),onClick:U},{default:a(()=>[n(i(t.viewMode==="table"?"卡片视图":"表格视图"),1)]),_:1},8,["icon"]),s(d,{icon:c(R),type:"primary",onClick:l[2]||(l[2]=e=>x("refresh"))},{default:a(()=>[n(" 刷新 ")]),_:1},8,["icon"])])])):w("",!0),t.loading?(r(),m("div",re,[s(A,{class:"animate-spin text-4xl text-primary mb-4"},{default:a(()=>[s(c(R))]),_:1}),ce])):w("",!0),t.error?(r(),k(P,{key:2,title:t.error,type:"error",class:"mb-4","show-icon":""},null,8,["title"])):w("",!0),!t.loading&&t.devices.length===0?(r(),k(E,{key:3,description:"暂无设备，请检查设备连接状态",class:"py-12"})):w("",!0),!t.loading&&t.devices.length>0&&t.viewMode==="table"?(r(),k(G,{key:4,data:F.value,stripe:"",style:{width:"100%"},class:"devices-table"},{default:a(()=>[s(_,{prop:"device_id",label:"设备ID",width:"120",sortable:"",onClick:l[3]||(l[3]=e=>b("device_id"))},{default:a(({row:e})=>[s(g,{type:"info"},{default:a(()=>[n(i(e.device_id),1)]),_:2},1024)]),_:1}),s(_,{prop:"brand",label:"品牌",width:"100",sortable:"",onClick:l[4]||(l[4]=e=>b("brand"))}),s(_,{prop:"model",label:"型号",width:"150",sortable:"",onClick:l[5]||(l[5]=e=>b("model"))}),s(_,{prop:"android_version",label:"系统版本",width:"120",sortable:"",onClick:l[6]||(l[6]=e=>b("android_version"))},{default:a(({row:e})=>[e.android_version?(r(),k(g,{key:0,size:"small"},{default:a(()=>[n(i(e.android_version),1)]),_:2},1024)):(r(),m("span",ue,"-"))]),_:1}),s(_,{prop:"occupied_personnel",label:"占用人员",width:"120",sortable:"",onClick:l[7]||(l[7]=e=>b("occupied_personnel"))},{default:a(({row:e})=>[n(i(e.occupied_personnel||"-"),1)]),_:1}),s(_,{prop:"status",label:"状态",width:"100",sortable:"",onClick:l[8]||(l[8]=e=>b("status"))},{default:a(({row:e})=>[s(g,{type:B(e.status)},{default:a(()=>[n(i(V(e.status)),1)]),_:2},1032,["type"])]),_:1}),s(_,{prop:"ip_address",label:"IP地址",width:"140"},{default:a(({row:e})=>[n(i(e.ip_address||"-"),1)]),_:1}),s(_,{prop:"last_online",label:"最后在线",width:"120"},{default:a(({row:e})=>[n(i(e.last_online||"刚刚"),1)]),_:1}),s(_,{label:"操作",width:"200",fixed:"right"},{default:a(({row:e})=>[o("div",pe,[s(d,{size:"small",type:"success",icon:c(S),disabled:e.status==="online"||e.status==="device",onClick:M=>T(e)},{default:a(()=>[n(" 连接 ")]),_:2},1032,["icon","disabled","onClick"]),s(d,{size:"small",type:"primary",icon:c(q),onClick:M=>L(e)},{default:a(()=>[n(" 报告 ")]),_:2},1032,["icon","onClick"]),s(d,{size:"small",type:"info",icon:c(Q),disabled:""},{default:a(()=>[n(" 屏幕 ")]),_:1},8,["icon"])])]),_:1})]),_:1},8,["data"])):w("",!0),!t.loading&&t.devices.length>0&&t.viewMode==="card"?(r(),m("div",_e,[(r(!0),m(ee,null,te(F.value,e=>(r(),k(H,{key:e.id||e.device_id,shadow:"hover",class:"device-card"},{header:a(()=>[o("div",fe,[o("div",ye,[o("div",{class:se(["w-3 h-3 rounded-full mr-2",{"bg-green-500":e.status==="online"||e.status==="device","bg-red-500":e.status==="offline","bg-yellow-500":e.status==="busy","bg-orange-500":e.status==="unauthorized"}])},null,2),o("span",me,i(e.brand)+" "+i(e.model),1)]),s(g,{type:B(e.status),size:"small"},{default:a(()=>[n(i(V(e.status)),1)]),_:2},1032,["type"])])]),footer:a(()=>[o("div",Be,[s(d,{size:"small",type:"success",icon:c(S),disabled:e.status==="online"||e.status==="device",onClick:M=>T(e)},{default:a(()=>[n(" 连接 ")]),_:2},1032,["icon","disabled","onClick"]),s(d,{size:"small",type:"primary",icon:c(q),onClick:M=>L(e)},{default:a(()=>[n(" 报告 ")]),_:2},1032,["icon","onClick"]),s(d,{size:"small",type:"info",icon:c(Q),disabled:""},{default:a(()=>[n(" 屏幕 ")]),_:1},8,["icon"])])]),default:a(()=>[o("div",ve,[o("div",be,[he,s(g,{type:"info",size:"small"},{default:a(()=>[n(i(e.device_id),1)]),_:2},1024)]),o("div",ge,[we,o("span",null,i(e.brand||"-"),1)]),o("div",ke,[Ce,o("span",null,i(e.model||"-"),1)]),o("div",xe,[De,e.android_version?(r(),k(g,{key:0,size:"small"},{default:a(()=>[n(i(e.android_version),1)]),_:2},1024)):(r(),m("span",ze,"-"))]),o("div",je,[Me,o("span",null,i(e.occupied_personnel||"-"),1)]),o("div",Se,[$e,o("span",null,i(e.ip_address||"-"),1)]),o("div",Ie,[Ve,o("span",null,i(e.last_online||"刚刚"),1)])])]),_:2},1024))),128))])):w("",!0),s(W,{ref_key:"reportDialogRef",ref:$},null,512),s(X,{ref_key:"usbDialogRef",ref:I},null,512)])}}});const Ne=ae(Fe,[["__scopeId","data-v-969c012b"]]);export{Ne as default};
