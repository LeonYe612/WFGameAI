import{z as W,a as $,r as A}from"./index-0964a6d0.js";import{F as G}from"./file-a53ce59f.js";import{T as L}from"./team-91c0136c.js";import{useSysTeamManagement as O}from"./hook-8b0f0b3e.js";import{useTeamGlobalState as P}from"./teamStoreStateHook-4627677e.js";import{m as q,r as x,o as H,A as c,O as J,P as K,x as o,j as r,u as p,I as i,z as s,l as g,R as f,k as z,y as S,B as R,N as Q}from"./index-41f05ddf.js";/* empty css                                              */import"./team-e495a6d3.js";import"./request-28f7529e.js";import"./team-f68af328.js";import"./enums-b2002ef1.js";const U={class:"flex items-center"},X={class:"inline-flex items-center align-middle justify-start"},Y={key:0},Z={key:1},me=q({name:"TeamSelectorTable",__name:"table",props:{scope:{type:String,default:"all"}},setup(w){const B=w,D=x(),d=x(),{dataList:h,loading:I,fetchData:N,toggleTableExpansion:y}=O({teamTableRef:d}),{activeTeamId:b,switchTeam:V,initWatchTeamId:E}=P(),_=t=>{var e;(e=d.value)==null||e.setCurrentRow(t)},k=(t,e)=>{const a=(t==null?void 0:t.length)||0;for(let u=0;u<a;u++){const l=t[u];if(l.id==e)return l;if(l.children&&l.children.length>0){const m=k(l.children,e);if(m)return m}}return null},v=()=>{const t=b.value;if(!t){_();return}const e=k(h.value,t);e&&Q(()=>{_(e)})},T=()=>{N(B.scope,()=>{v()})};E(v),H(()=>{T()});const j=(t,e)=>{var a;if(D.value=t,!!t){if(t.genre!=2){(a=d.value)==null||a.toggleRowExpansion(t),_(e);return}t.id!=b.value&&V(t.id)}};return(t,e)=>{const a=c("el-button"),u=c("el-button-group"),l=c("el-icon"),m=c("el-table-column"),C=c("el-tag"),F=c("el-table"),M=J("loading");return K((r(),p(F,{class:"team-selector-table cursor-pointer select-none",height:"100%","max-height":"100%","empty-text":"您尚未加入任何团队",data:o(h),"default-expand-all":"","row-key":"id","tree-props":{children:"children"},ref_key:"teamTableRef",ref:d,"table-layout":"auto","highlight-current-row":"","current-row-key":"id",onCurrentChange:j},{default:i(()=>[s(m,{label:"名称",prop:"meta.title"},{header:i(()=>[g("div",U,[e[2]||(e[2]=g("span",null,"名称",-1)),s(u,{class:"ml-2"},{default:i(()=>[s(a,{title:"展开所有",type:"default",plain:"",size:"small",icon:o(W),onClick:e[0]||(e[0]=n=>o(y)(!0))},null,8,["icon"]),s(a,{title:"合并所有",type:"default",plain:"",size:"small",icon:o($),onClick:e[1]||(e[1]=n=>o(y)(!1))},null,8,["icon"]),s(a,{title:"刷新数据",type:"default",plain:"",size:"small",icon:o(A),onClick:T},null,8,["icon"])]),_:1})])]),default:i(({row:n})=>[g("div",X,[s(l,{size:22},{default:i(()=>[n.genre==1?(r(),p(o(G),{key:0})):f("",!0),n.genre==2?(r(),p(o(L),{key:1})):f("",!0)]),_:2},1024),s(l),n.genre==1?(r(),z("span",Y,S(n.name),1)):(r(),z("span",Z,S(n.name),1))])]),_:1}),s(m,{align:"center",label:"类型"},{default:i(({row:n})=>[n.genre==1?(r(),p(C,{key:0,type:"warning",effect:"plain"},{default:i(()=>[...e[3]||(e[3]=[R("目录",-1)])]),_:1})):f("",!0),n.genre==2?(r(),p(C,{key:1,effect:"plain"},{default:i(()=>[...e[4]||(e[4]=[R("团队",-1)])]),_:1})):f("",!0)]),_:1})]),_:1},8,["data"])),[[M,o(I)]])}}});export{me as default};
