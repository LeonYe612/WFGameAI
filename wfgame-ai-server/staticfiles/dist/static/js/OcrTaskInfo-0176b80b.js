import{d as I,t as v,e as x}from"./enums-b2002ef1.js";import{a$ as D,m as w,r as T,w as z,A as m,j as B,u as C,I as s,z as t,l as p,y as c,x as i,B as r,M as Y,_ as E}from"./index-fbbdd03e.js";import{a as M}from"./ocr-8f40b38a.js";import{s as N}from"./request-2aeceb02.js";const O=(_,u,a)=>{if(a||(a="/"),_==null||_=="")return a;u||(u="YYYY-MM-DD HH:mm:ss");const d=D(new Date(_));return d.year()==1||d.year()==0?a:d.format(u)},V={class:"font-bold"},$={class:"source-info"},j=w({__name:"OcrTaskInfo",props:{taskId:{}},setup(_){const u=_,a=T(null),d=l=>(l==null?void 0:l.source_type)==="git"?`${l==null?void 0:l.git_repository_url} (${l==null?void 0:l.git_branch})`:"文件上传",y=async()=>{if(u.taskId)try{const l=await N({apiFunc:M.get,apiParams:u.taskId});a.value=(l==null?void 0:l.data)||null}catch(l){console.error(l)}};return z(()=>u.taskId,l=>{l?y():a.value=null},{immediate:!0}),(l,A)=>{const o=m("el-descriptions-item"),f=m("el-tag"),g=m("el-descriptions"),h=m("el-card");return B(),C(h,{class:"task-info-card"},{default:s(()=>[t(g,{title:"任务信息",column:1,border:""},{default:s(()=>[t(o,{label:"任务ID","label-class-name":"desc-label",width:"120px"},{default:s(()=>{var e;return[p("span",V,c(((e=a.value)==null?void 0:e.id)||"-"),1)]}),_:1}),t(o,{label:"状态","label-class-name":"desc-label"},{default:s(()=>{var e,n;return[t(f,{type:(n=i(I)(i(v),(e=a.value)==null?void 0:e.status))==null?void 0:n.type,size:"small"},{default:s(()=>{var b;return[r(c(i(x)(i(v),(b=a.value)==null?void 0:b.status)),1)]}),_:1},8,["type"])]}),_:1}),t(o,{label:"数据来源","label-class-name":"desc-label"},{default:s(()=>{var e;return[p("div",$,[t(f,{type:((e=a.value)==null?void 0:e.source_type)==="git"?"success":"info",size:"small",class:"source-type-tag"},{default:s(()=>{var n;return[r(c(((n=a.value)==null?void 0:n.source_type)==="git"?"Git":"上传"),1)]}),_:1},8,["type"]),p("span",null,c(d(a.value)),1)])]}),_:1}),t(o,{label:"耗时","label-class-name":"desc-label"},{default:s(()=>{var e;return[r(c(((e=a.value)==null?void 0:e.duration)||"-"),1)]}),_:1}),t(o,{label:"图片总数","label-class-name":"desc-label"},{default:s(()=>{var e;return[r(c((e=a.value)==null?void 0:e.total_images),1)]}),_:1}),t(o,{label:"命中数","label-class-name":"desc-label"},{default:s(()=>{var e;return[r(c((e=a.value)==null?void 0:e.matched_images),1)]}),_:1}),t(o,{label:"匹配率","label-class-name":"desc-label"},{default:s(()=>{var e;return[r(c(((e=a.value)==null?void 0:e.match_rate)||0)+"%",1)]}),_:1}),t(o,{label:"创建者","label-class-name":"desc-label"},{default:s(()=>{var e;return[r(c(((e=a.value)==null?void 0:e.created_by)||"-"),1)]}),_:1}),t(o,{label:"创建时间","label-class-name":"desc-label"},{default:s(()=>{var e;return[r(c(i(O)((e=a.value)==null?void 0:e.created_at)),1)]}),_:1}),t(o,{label:"备注",span:2,"label-class-name":"desc-label"},{default:s(()=>{var e,n;return[p("span",{class:Y({"text-red-400":(e=a.value)==null?void 0:e.remark})},c(((n=a.value)==null?void 0:n.remark)||"-"),3)]}),_:1})]),_:1})]),_:1})}}});const G=E(j,[["__scopeId","data-v-f0861436"]]);export{G as default};
