import{i as j,N as E,r as F,I as G,F as L,K as q,m as H,G as K}from"./index-52ed101c.js";import{T as S}from"./tasks-69968588.js";import{t as k,a as T}from"./rules-69960a32.js";import{l as Q,r as R,w as J,z as i,h as c,j as M,y as e,H as t,k as f,x as p,q as m,A as d,Q as O,v as n,u as N,_ as W}from"./index-c3bc70ba.js";const X={class:"tasks-table"},Y={class:"task-name"},Z={class:"task-type"},ee={class:"device-info"},te={class:"action-buttons"},ae={class:"pagination-wrapper"},ne=Q({__name:"tasksTable",props:{data:{},loading:{type:Boolean,default:!1},pagination:{}},emits:["action","page-change","size-change"],setup(x,{emit:y}){const C=x,_=R({...C.pagination});J(()=>C.pagination,l=>{_.value={...l}},{deep:!0});const g=(l,r)=>{y("action",l,r)},B=l=>{},D=l=>{y("page-change",l)},I=l=>{y("size-change",l)},P=l=>l?new Date(l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"--";return(l,r)=>{const b=i("el-tag"),u=i("el-table-column"),s=i("el-icon"),h=i("el-button"),z=i("el-dropdown-item"),V=i("el-dropdown-menu"),$=i("el-dropdown"),A=i("el-table"),U=i("el-pagination");return c(),M("div",X,[e(A,{data:l.data,loading:l.loading,stripe:"",style:{width:"100%"},onSortChange:B},{default:t(()=>[e(u,{prop:"name",label:"任务名称","min-width":"200",sortable:""},{default:t(({row:a})=>[f("div",Y,[f("span",null,p(a.name),1),a.description?(c(),m(b,{key:0,size:"small",type:"info",class:"description-tag"},{default:t(()=>[d(p(a.description),1)]),_:2},1024)):O("",!0)])]),_:1}),e(u,{prop:"status",label:"状态",width:"120",align:"center"},{default:t(({row:a})=>{var o;return[e(b,{type:(o=n(k)[a.status])==null?void 0:o.type,size:"small"},{default:t(()=>{var v;return[e(s,{class:"status-icon"},{default:t(()=>{var w;return[(c(),m(N((w=n(k)[a.status])==null?void 0:w.icon)))]}),_:2},1024),d(" "+p((v=n(k)[a.status])==null?void 0:v.label),1)]}),_:2},1032,["type"])]}),_:1}),e(u,{prop:"type",label:"类型",width:"120",align:"center"},{default:t(({row:a})=>{var o;return[f("div",Z,[e(s,null,{default:t(()=>{var v;return[(c(),m(N((v=n(T)[a.type])==null?void 0:v.icon)))]}),_:2},1024),d(" "+p((o=n(T)[a.type])==null?void 0:o.label),1)])]}),_:1}),e(u,{prop:"device",label:"设备",width:"180"},{default:t(({row:a})=>[f("div",ee,[e(s,null,{default:t(()=>[e(n(j))]),_:1}),d(" "+p(a.device),1)])]),_:1}),e(u,{prop:"startTime",label:"开始时间",width:"160",sortable:""},{default:t(({row:a})=>[d(p(P(a.startTime)),1)]),_:1}),e(u,{prop:"duration",label:"耗时",width:"120",align:"center"},{default:t(({row:a})=>[d(p(a.duration||"--"),1)]),_:1}),e(u,{label:"操作",width:"200",fixed:"right",align:"center"},{default:t(({row:a})=>[f("div",te,[a.status===n(S).RUNNING?(c(),m(h,{key:0,type:"danger",size:"small",onClick:o=>g("stop",a)},{default:t(()=>[e(s,null,{default:t(()=>[e(n(E))]),_:1})]),_:2},1032,["onClick"])):a.status===n(S).FAILED?(c(),m(h,{key:1,type:"warning",size:"small",onClick:o=>g("restart",a)},{default:t(()=>[e(s,null,{default:t(()=>[e(n(F))]),_:1})]),_:2},1032,["onClick"])):(c(),m(h,{key:2,type:"primary",size:"small",onClick:o=>g("start",a)},{default:t(()=>[e(s,null,{default:t(()=>[e(n(G))]),_:1})]),_:2},1032,["onClick"])),e(h,{type:"info",size:"small",onClick:o=>g("view",a)},{default:t(()=>[e(s,null,{default:t(()=>[e(n(L))]),_:1})]),_:2},1032,["onClick"]),e($,{onCommand:o=>g(o,a)},{dropdown:t(()=>[e(V,null,{default:t(()=>[e(z,{command:"duplicate"},{default:t(()=>[e(s,null,{default:t(()=>[e(n(q))]),_:1}),d(" 复制任务 ")]),_:1}),e(z,{command:"delete",divided:""},{default:t(()=>[e(s,null,{default:t(()=>[e(n(H))]),_:1}),d(" 删除任务 ")]),_:1})]),_:1})]),default:t(()=>[e(h,{size:"small",type:"default"},{default:t(()=>[e(s,null,{default:t(()=>[e(n(K))]),_:1})]),_:1})]),_:2},1032,["onCommand"])])]),_:1})]),_:1},8,["data","loading"]),f("div",ae,[e(U,{"current-page":_.value.currentPage,"onUpdate:currentPage":r[0]||(r[0]=a=>_.value.currentPage=a),"page-size":_.value.pageSize,"onUpdate:pageSize":r[1]||(r[1]=a=>_.value.pageSize=a),total:_.value.total,"page-sizes":[10,20,50,100],background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:I,onCurrentChange:D},null,8,["current-page","page-size","total"])])])}}});const de=W(ne,[["__scopeId","data-v-7f5c9fea"]]);export{de as default};
