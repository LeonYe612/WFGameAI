import{i as z}from"./index-0964a6d0.js";import{a as A,b as G,c as L}from"./rules-08a3868a.js";import{m as T,d as D,r as f,w as U,A as n,j as i,u as m,I as a,l as v,z as t,B as r,y,k as N,p as S,v as X,x as p,F as E,aP as q,N as H,_ as J}from"./index-41f05ddf.js";import"./tasks-b16f8164.js";const K={style:{display:"flex","align-items":"center",gap:"8px"}},Q={style:{display:"flex","align-items":"center",gap:"8px"}},W={class:"dialog-footer"},Y=T({__name:"taskFormDialog",props:{visible:{type:Boolean,default:!1},task:{default:null},loading:{type:Boolean,default:!1}},emits:["update:visible","submit","cancel"],setup(O,{emit:P}){const u=O,c=P,b=D({get:()=>u.visible,set:l=>c("update:visible",l)}),_=f(),s=f({name:"",type:"",device:"",description:""}),g=D(()=>!!u.task),R=f([{label:"OnePlus 9 Pro",value:"oneplus_9_pro"},{label:"Samsung Galaxy S21",value:"samsung_s21"},{label:"Xiaomi Mi 11",value:"xiaomi_mi11"},{label:"多设备",value:"multiple"}]),V=()=>{s.value={name:"",type:"",device:"",description:""},H(()=>{var l;(l=_.value)==null||l.clearValidate()})};U(()=>u.task,l=>{l?s.value={name:l.name,type:l.type,device:l.device,description:l.description||""}:V()},{immediate:!0}),U(()=>u.visible,l=>{l&&!u.task&&V()});const I=async()=>{var l;try{await((l=_.value)==null?void 0:l.validate()),c("submit",{...s.value})}catch{q.warning("请完善表单信息")}},x=()=>{c("cancel")};return(l,o)=>{const k=n("el-input"),d=n("el-form-item"),h=n("el-icon"),w=n("el-option"),C=n("el-select"),M=n("el-form"),B=n("el-button"),j=n("el-dialog");return i(),m(j,{modelValue:b.value,"onUpdate:modelValue":o[4]||(o[4]=e=>b.value=e),title:g.value?"编辑任务":"新建任务",width:"600px","close-on-click-modal":!1,onClose:x},{footer:a(()=>[v("div",W,[t(B,{onClick:x},{default:a(()=>[...o[5]||(o[5]=[r(" 取消 ",-1)])]),_:1}),t(B,{type:"primary",loading:l.loading,onClick:I},{default:a(()=>[r(y(g.value?"保存":"创建"),1)]),_:1},8,["loading"])])]),default:a(()=>[t(M,{ref_key:"formRef",ref:_,model:s.value,rules:p(L),"label-width":"100px"},{default:a(()=>[t(d,{label:"任务名称",prop:"name"},{default:a(()=>[t(k,{modelValue:s.value.name,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value.name=e),placeholder:"请输入任务名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(d,{label:"任务类型",prop:"type"},{default:a(()=>[t(C,{modelValue:s.value.type,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value.type=e),placeholder:"请选择任务类型",style:{width:"100%"}},{default:a(()=>[(i(!0),N(E,null,S(p(G).slice(1),e=>(i(),m(w,{key:e.value,label:e.label,value:e.value},{default:a(()=>[v("div",K,[t(h,null,{default:a(()=>{var F;return[(i(),m(X((F=p(A)[e.value])==null?void 0:F.icon)))]}),_:2},1024),r(" "+y(e.label),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"目标设备",prop:"device"},{default:a(()=>[t(C,{modelValue:s.value.device,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value.device=e),placeholder:"请选择目标设备",style:{width:"100%"},filterable:""},{default:a(()=>[(i(!0),N(E,null,S(R.value,e=>(i(),m(w,{key:e.value,label:e.label,value:e.value},{default:a(()=>[v("div",Q,[t(h,null,{default:a(()=>[t(p(z))]),_:1}),r(" "+y(e.label),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"任务描述"},{default:a(()=>[t(k,{modelValue:s.value.description,"onUpdate:modelValue":o[3]||(o[3]=e=>s.value.description=e),type:"textarea",rows:3,placeholder:"请输入任务描述（可选）",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});const ae=J(Y,[["__scopeId","data-v-c32cfaf1"]]);export{ae as default};
