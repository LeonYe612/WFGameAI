import{u as K,p as L}from"./index-8ca571cf.js";import{M as O}from"./index-761163ea.js";import P from"./dataStats-199c1c24.js";import W from"./dataSourcesTable-52015d1a.js";import{_ as X}from"./dataSourceDialog.vue_vue_type_script_setup_true_lang-3a38ce81.js";import{_ as Y}from"./importDialog.vue_vue_type_script_setup_true_lang-16f8b264.js";import Z from"./testDataTable-136b5522.js";import{_ as ee}from"./dataAnalysisPanel.vue_vue_type_script_setup_true_lang-f16892a5.js";import{useDataManagement as ae}from"./hook-72404500.js";import{l as te,r as f,o as oe,z as i,h as se,q as ne,H as n,k as _,y as o,A as b,v as e,_ as re}from"./index-e046f3d2.js";import"./activeTeamInfo.vue_vue_type_script_setup_true_lang-ee3df10e.js";import"./teamStoreStateHook-d4e6c729.js";import"./team-cb095191.js";import"./team-268d4664.js";import"./request-d2ecd641.js";import"./enums-b2002ef1.js";import"./team-0fc70eaf.js";import"./types-5a18ccfd.js";import"./rules-3e6faffa.js";const le={class:"flex items-center justify-between"},ie={class:"flex items-center space-x-2 ml-auto"},ue={class:"data-content"},de=te({name:"DataManagement",__name:"index",setup(ce){const{dataSources:u,testData:x,analysisResults:S,loading:l,error:C,stats:T,currentDataSource:r,searchQuery:v,statusFilter:y,typeFilter:D,filteredDataSources:V,fetchDataSources:g,createNewDataSource:R,updateExistingDataSource:w,removeDataSource:k,testConnection:z,refreshDataSourceData:F,fetchTestData:E,importDataFile:I,exportDataFile:M,analyzeData:U,fetchAnalysisResults:A}=ae(),d=f(),c=f(!1),m=f("datasource");oe(()=>{g()});const $=()=>{var t;(t=d.value)==null||t.showDialog()},q=t=>{var a;(a=d.value)==null||a.showDialog(t)},B=t=>{t.id?w(t.id,t):R(t)},N=()=>{c.value=!0},Q=t=>{I(t)},j=t=>{M({sourceId:t.id,format:"excel"})},H=t=>{var a;m.value=t,t==="analysis"&&(a=r.value)!=null&&a.id&&A(r.value.id)};return(t,a)=>{const h=i("el-button"),p=i("el-tab-pane"),G=i("el-tabs"),J=i("el-card");return se(),ne(O,{title:"数据管理"},{"header-extra":n(()=>[_("div",le,[_("div",ie,[o(h,{icon:e(K),size:"large",type:"primary",plain:"",onClick:N},{default:n(()=>[b(" 导入数据 ")]),_:1},8,["icon"]),o(h,{icon:e(L),size:"large",type:"success",onClick:$},{default:n(()=>[b(" 新建数据源 ")]),_:1},8,["icon"])])])]),default:n(()=>[_("div",ue,[o(P,{stats:e(T),loading:e(l)},null,8,["stats","loading"]),o(J,{shadow:"never",class:"border-0"},{default:n(()=>[o(G,{modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=s=>m.value=s),onTabChange:H},{default:n(()=>[o(p,{label:"数据源",name:"datasource"},{default:n(()=>[o(W,{"data-sources":e(u),loading:e(l),error:e(C),"search-query":e(v),"status-filter":e(y),"type-filter":e(D),"filtered-data-sources":e(V),onRefresh:e(g),onEdit:q,onDelete:e(k),onTestConnection:e(z),onRefreshSource:e(F),onExport:j,"onUpdate:searchQuery":a[0]||(a[0]=s=>v.value=s),"onUpdate:statusFilter":a[1]||(a[1]=s=>y.value=s),"onUpdate:typeFilter":a[2]||(a[2]=s=>D.value=s)},null,8,["data-sources","loading","error","search-query","status-filter","type-filter","filtered-data-sources","onRefresh","onDelete","onTestConnection","onRefreshSource"])]),_:1}),o(p,{label:"测试数据",name:"testdata"},{default:n(()=>[o(Z,{"test-data":e(x),"current-data-source":e(r),loading:e(l),onRefresh:a[3]||(a[3]=s=>e(r)&&e(E)(e(r).id))},null,8,["test-data","current-data-source","loading"])]),_:1}),o(p,{label:"数据分析",name:"analysis"},{default:n(()=>[o(ee,{"data-sources":e(u),"analysis-results":e(S),loading:e(l),onAnalyze:e(U)},null,8,["data-sources","analysis-results","loading","onAnalyze"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),o(X,{ref_key:"dataSourceDialogRef",ref:d,onConfirm:B},null,512),o(Y,{modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=s=>c.value=s),"data-sources":e(u),onImport:Q},null,8,["modelValue","data-sources"])]),_:1})}}});const Fe=re(de,[["__scopeId","data-v-613bc10e"]]);export{Fe as default};
