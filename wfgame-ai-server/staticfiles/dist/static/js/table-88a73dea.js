import{z as W,a as $,r as q}from"./index-52ed101c.js";import{F as A}from"./file-27036f63.js";import{T as G}from"./team-3cb80684.js";import{useSysTeamManagement as H}from"./hook-ba3a1950.js";import{useTeamGlobalState as L}from"./teamStoreStateHook-a7dc154e.js";import{l as O,r as x,o as Q,z as c,N as J,O as K,v as a,h as r,q as d,H as i,y as s,k as g,Q as f,j as z,x as S,A as w,M as P}from"./index-c3bc70ba.js";/* empty css                                              */import"./team-dc58a0de.js";import"./request-6dd7bfdd.js";import"./team-2a364612.js";import"./enums-d2c4bc7a.js";const U={class:"flex items-center"},X=g("span",null,"名称",-1),Y={class:"inline-flex items-center align-middle justify-start"},Z={key:0},ee={key:1},de=O({name:"TeamSelectorTable",__name:"table",props:{scope:{type:String,default:"all"}},setup(D){const N=D,R=x(),p=x(),{dataList:h,loading:B,fetchData:I,toggleTableExpansion:y}=H({teamTableRef:p}),{activeTeamId:b,switchTeam:V,initWatchTeamId:E}=L(),_=e=>{var t;(t=p.value)==null||t.setCurrentRow(e)},k=(e,t)=>{const o=(e==null?void 0:e.length)||0;for(let u=0;u<o;u++){const l=e[u];if(l.id==t)return l;if(l.children&&l.children.length>0){const m=k(l.children,t);if(m)return m}}return null},v=()=>{const e=b.value;if(!e){_();return}const t=k(h.value,e);t&&P(()=>{_(t)})},T=()=>{I(N.scope,()=>{v()})};E(v),Q(()=>{T()});const M=(e,t)=>{var o;if(R.value=e,!!e){if(e.genre!=2){(o=p.value)==null||o.toggleRowExpansion(e),_(t);return}e.id!=b.value&&V(e.id)}};return(e,t)=>{const o=c("el-button"),u=c("el-button-group"),l=c("el-icon"),m=c("el-table-column"),C=c("el-tag"),j=c("el-table"),F=J("loading");return K((r(),d(j,{class:"team-selector-table cursor-pointer select-none",height:"100%","max-height":"100%","empty-text":"您尚未加入任何团队",data:a(h),"default-expand-all":"","row-key":"id","tree-props":{children:"children"},ref_key:"teamTableRef",ref:p,"table-layout":"auto","highlight-current-row":"","current-row-key":"id",onCurrentChange:M},{default:i(()=>[s(m,{label:"名称",prop:"meta.title"},{header:i(()=>[g("div",U,[X,s(u,{class:"ml-2"},{default:i(()=>[s(o,{title:"展开所有",type:"default",plain:"",size:"small",icon:a(W),onClick:t[0]||(t[0]=n=>a(y)(!0))},null,8,["icon"]),s(o,{title:"合并所有",type:"default",plain:"",size:"small",icon:a($),onClick:t[1]||(t[1]=n=>a(y)(!1))},null,8,["icon"]),s(o,{title:"刷新数据",type:"default",plain:"",size:"small",icon:a(q),onClick:T},null,8,["icon"])]),_:1})])]),default:i(({row:n})=>[g("div",Y,[s(l,{size:22},{default:i(()=>[n.genre==1?(r(),d(a(A),{key:0})):f("",!0),n.genre==2?(r(),d(a(G),{key:1})):f("",!0)]),_:2},1024),s(l),n.genre==1?(r(),z("span",Z,S(n.name),1)):(r(),z("span",ee,S(n.name),1))])]),_:1}),s(m,{align:"center",label:"类型"},{default:i(({row:n})=>[n.genre==1?(r(),d(C,{key:0,type:"warning",effect:"plain"},{default:i(()=>[w("目录")]),_:1})):f("",!0),n.genre==2?(r(),d(C,{key:1,effect:"plain"},{default:i(()=>[w("团队")]),_:1})):f("",!0)]),_:1})]),_:1},8,["data"])),[[F,a(B)]])}}});export{de as default};
