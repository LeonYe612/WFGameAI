import{p as K,u as H,d as O,J as P,K as W,r as X}from"./index-0964a6d0.js";import{M as Y}from"./index-65a61a94.js";/* empty css                                                                     */import Z from"./scriptsTable-9c48a22e.js";import ee from"./scriptImportDialog-ef9292ec.js";import te from"./scriptCreateDialog-7004c29f.js";import oe from"./scriptSettingsDialog-2e1fb39f.js";import{useScriptsManagement as ie}from"./hook-bf7a3e99.js";import{m as re,r as u,o as ne,A as g,j as ae,u as se,I as a,l,z as i,B as s,x as t,R as le,aG as B,_ as pe}from"./index-41f05ddf.js";import"./activeTeamInfo.vue_vue_type_script_setup_true_lang-53ea4eee.js";import"./teamStoreStateHook-4627677e.js";import"./team-f68af328.js";import"./team-e495a6d3.js";import"./request-28f7529e.js";import"./enums-b2002ef1.js";import"./team-91c0136c.js";import"./scriptEditDialog-e9884ef3.js";import"./scripts-8ebe9156.js";import"./scriptReplayDialog-720997be.js";import"./rules-0bcc1e57.js";const ce={class:"flex items-center justify-between"},de={class:"flex items-center space-x-2 ml-auto"},ue={class:"scripts-content"},ge={class:"flex-1 min-h-0"},fe=re({name:"ScriptsManagement",__name:"index",setup(me){const{scripts:R,categories:d,loading:c,error:I,stats:M,searchQuery:f,categoryFilter:m,typeFilter:y,includeInLogFilter:_,viewMode:v,filteredAndSortedScripts:h,settings:T,fetchScripts:p,fetchCategories:b,executeDebug:z,executeRecord:F,duplicateScript:V,removeScript:L,toggleScriptLogStatus:U,loadSettings:N,saveSettings:j}=ie(),S=u(),x=u(),C=u();ne(()=>{N(),p(),b()});const q=async o=>{try{const e=await B.prompt("请输入新脚本名称:","复制脚本",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:`复制_${o}`,inputValidator:r=>!r||r.trim()===""?"脚本名称不能为空":r.length>100?"脚本名称不能超过100个字符":!0,inputErrorMessage:"请输入有效的脚本名称"});e.value&&await V(o,e.value.trim())}catch{}},A=async o=>{try{await B.confirm(`确定要删除脚本 "${o}" 吗？此操作不可恢复。`,"确认删除",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}),await L(o)}catch{}},w=()=>{var o;(o=S.value)==null||o.showDialog()},D=()=>{var o;(o=x.value)==null||o.showDialog()},E=()=>{var o;(o=C.value)==null||o.showDialog(T.value)},Q=o=>{j(o)},$=()=>{p()},G=()=>{p()};return(o,e)=>{const r=g("el-button"),k=g("el-divider"),J=g("el-alert");return ae(),se(Y,{title:"脚本管理"},{"header-extra":a(()=>[l("div",ce,[l("div",de,[i(r,{icon:t(K),size:"large",type:"primary",onClick:D},{default:a(()=>[...e[5]||(e[5]=[s(" 新建脚本 ",-1)])]),_:1},8,["icon"]),i(r,{icon:t(H),size:"large",type:"success",plain:"",onClick:w},{default:a(()=>[...e[6]||(e[6]=[s(" 导入脚本 ",-1)])]),_:1},8,["icon"]),i(k,{direction:"vertical"}),i(r,{icon:t(O),size:"large",type:"info",plain:"",onClick:t(z),loading:t(c)},{default:a(()=>[...e[7]||(e[7]=[s(" 调试脚本 ",-1)])]),_:1},8,["icon","onClick","loading"]),i(r,{icon:t(P),size:"large",type:"warning",plain:"",onClick:t(F),loading:t(c)},{default:a(()=>[...e[8]||(e[8]=[s(" 录制脚本 ",-1)])]),_:1},8,["icon","onClick","loading"]),i(k,{direction:"vertical"}),i(r,{icon:t(W),size:"large",type:"primary",plain:"",onClick:E},{default:a(()=>[...e[9]||(e[9]=[s(" 设置 ",-1)])]),_:1},8,["icon"]),i(r,{icon:t(X),size:"large",type:"primary",plain:"",onClick:t(p),loading:t(c)},{default:a(()=>[...e[10]||(e[10]=[s(" 刷新列表 ",-1)])]),_:1},8,["icon","onClick","loading"])])])]),default:a(()=>[l("div",ue,[i(J,{title:"功能演示",type:"info",class:"mb-6","show-icon":"",closable:!0},{default:a(()=>[...e[11]||(e[11]=[l("p",null,[l("strong",null,"脚本日志功能:"),s(' 可以通过"加入日志"和"移出日志"功能控制哪些脚本会出现在测试报告中。 已加入日志的脚本会在测试报告中显示执行记录，未加入日志的脚本则不会。 ')],-1)])]),_:1}),le("",!0),l("div",ge,[i(Z,{scripts:t(R),categories:t(d),loading:t(c),error:t(I),stats:t(M),"search-query":t(f),"category-filter":t(m),"type-filter":t(y),"include-in-log-filter":t(_),"view-mode":t(v),"filtered-sorted-scripts":t(h),onCopy:q,onDelete:A,onToggleLog:t(U),onRefresh:t(p),onCreate:D,onImport:w,"onUpdate:searchQuery":e[0]||(e[0]=n=>f.value=n),"onUpdate:categoryFilter":e[1]||(e[1]=n=>m.value=n),"onUpdate:typeFilter":e[2]||(e[2]=n=>y.value=n),"onUpdate:includeInLogFilter":e[3]||(e[3]=n=>_.value=n),"onUpdate:viewMode":e[4]||(e[4]=n=>v.value=n)},null,8,["scripts","categories","loading","error","stats","search-query","category-filter","type-filter","include-in-log-filter","view-mode","filtered-sorted-scripts","onToggleLog","onRefresh"])])]),i(ee,{ref_key:"importDialogRef",ref:S,categories:t(d),onImported:$},null,8,["categories"]),i(te,{ref_key:"createDialogRef",ref:x,categories:t(d),onCreated:G},null,8,["categories"]),i(oe,{ref_key:"settingsDialogRef",ref:C,onSaved:Q},null,512)]),_:1})}}});const Ue=pe(fe,[["__scopeId","data-v-7947f0cc"]]);export{Ue as default};
