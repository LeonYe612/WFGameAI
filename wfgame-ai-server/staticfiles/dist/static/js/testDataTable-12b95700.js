import{d as j,r as N}from"./index-0964a6d0.js";import{m as V,r as h,w as E,A as d,j as s,k as r,z as o,I as n,l as a,x as k,y as i,B as _,R as u,u as f,F,p as z,_ as A}from"./index-41f05ddf.js";const I={key:0,class:"mb-4"},L={class:"flex items-center justify-between"},O={class:"flex items-center"},R={class:"font-medium"},U={class:"text-sm text-gray-500"},$={class:"text-sm text-gray-600"},q={key:0},G={key:1,class:"text-center py-12"},H={class:"flex items-center justify-between"},J={key:0},K={key:1,class:"text-gray-400"},M=V({name:"TestDataTable",__name:"testDataTable",props:{testData:{},currentDataSource:{},loading:{type:Boolean}},emits:["refresh"],setup(S,{emit:w}){const c=S,x=w,y=h([]),p=h([]),T=()=>{if(c.testData&&c.testData.length>0){const t=new Set;c.testData.forEach(e=>{Object.keys(e.data||{}).forEach(m=>{t.add(m)})}),y.value=Array.from(t),p.value=c.testData.map(e=>({id:e.id,name:e.name,...e.data}))}else y.value=[],p.value=[]};return E(()=>c.testData,()=>{T()},{immediate:!0}),(t,e)=>{const m=d("el-icon"),v=d("el-card"),B=d("el-button"),D=d("el-table-column"),C=d("el-table"),g=d("el-empty");return s(),r("div",null,[t.currentDataSource?(s(),r("div",I,[o(v,{shadow:"never",class:"border"},{header:n(()=>[a("div",L,[a("div",O,[o(m,{class:"mr-2"},{default:n(()=>[o(k(j))]),_:1}),a("span",R,i(t.currentDataSource.name),1)]),a("div",U," 共 "+i(t.testData.length)+" 条测试数据 ",1)])]),default:n(()=>[a("div",$,[a("p",null,[e[1]||(e[1]=a("strong",null,"类型：",-1)),_(i(t.currentDataSource.type),1)]),t.currentDataSource.description?(s(),r("p",q,[e[2]||(e[2]=a("strong",null,"描述：",-1)),_(i(t.currentDataSource.description),1)])):u("",!0),a("p",null,[e[3]||(e[3]=a("strong",null,"最后更新：",-1)),_(i(t.currentDataSource.lastUpdated),1)])])]),_:1})])):u("",!0),t.loading?(s(),r("div",G,[o(m,{class:"animate-spin text-4xl text-primary mb-4"},{default:n(()=>[o(k(N))]),_:1}),e[4]||(e[4]=a("p",{class:"text-gray-500"},"正在加载测试数据...",-1))])):u("",!0),!t.loading&&p.value.length>0?(s(),f(v,{key:2,shadow:"never",class:"border"},{header:n(()=>[a("div",H,[e[6]||(e[6]=a("span",{class:"font-medium"},"测试数据",-1)),o(B,{size:"small",onClick:e[0]||(e[0]=l=>x("refresh"))},{default:n(()=>[...e[5]||(e[5]=[_(" 刷新数据 ",-1)])]),_:1})])]),default:n(()=>[o(C,{data:p.value,stripe:"",style:{width:"100%"},"max-height":"400",class:"test-data-table"},{default:n(()=>[o(D,{prop:"name",label:"数据名称",width:"150",fixed:"left"}),(s(!0),r(F,null,z(y.value,l=>(s(),f(D,{key:l,prop:l,label:l,"min-width":"120","show-overflow-tooltip":""},{default:n(({row:b})=>[b[l]!==void 0&&b[l]!==null?(s(),r("span",J,i(b[l]),1)):(s(),r("span",K,"--"))]),_:2},1032,["prop","label"]))),128))]),_:1},8,["data"])]),_:1})):u("",!0),!t.loading&&!t.currentDataSource?(s(),f(g,{key:3,description:"请先选择一个数据源来查看测试数据",class:"py-12"})):u("",!0),!t.loading&&t.currentDataSource&&p.value.length===0?(s(),f(g,{key:4,description:"当前数据源暂无测试数据",class:"py-12"})):u("",!0)])}}});const W=A(M,[["__scopeId","data-v-ed6daeb3"]]);export{W as default};
