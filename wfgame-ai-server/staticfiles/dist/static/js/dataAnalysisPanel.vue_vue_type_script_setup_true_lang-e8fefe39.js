import{t as D,h as E}from"./index-ccf167da.js";import{A}from"./types-5a18ccfd.js";import{m as I,r as S,d as F,A as o,j as a,k as u,z as d,I as n,l as t,x as _,F as v,p as f,u as c,y as m,B as V,R as g,aP as L}from"./index-fbbdd03e.js";const U={class:"space-y-4"},Y={class:"flex items-center"},$={class:"space-y-4"},J={class:"text-xs text-gray-500"},M={class:"flex justify-end"},O={class:"space-y-4"},q={class:"flex items-center justify-between mb-2"},G={class:"flex items-center"},H={class:"text-xs text-gray-500"},K={class:"text-sm"},Q={class:"bg-white p-3 rounded border text-xs overflow-auto max-h-60"},ee=I({name:"DataAnalysisPanel",__name:"dataAnalysisPanel",props:{dataSources:{},analysisResults:{},loading:{type:Boolean}},emits:["analyze"],setup(w,{emit:N}){const B=w,C=N,i=S(""),r=S(""),p=F(()=>B.dataSources.filter(s=>s.status==="connected")),R=()=>{if(!i.value||!r.value){L.warning("请选择数据源和分析类型");return}C("analyze",i.value,r.value)},z=s=>{const l=A.find(y=>y.value===s);return l?l.label:s},T=s=>typeof s=="string"?s:typeof s=="object"?JSON.stringify(s,null,2):String(s);return(s,l)=>{const y=o("el-icon"),b=o("el-option"),x=o("el-select"),j=o("el-button"),h=o("el-card"),P=o("el-tag"),k=o("el-empty");return a(),u("div",U,[d(h,{shadow:"never",class:"border"},{header:n(()=>[t("div",Y,[d(y,{class:"mr-2"},{default:n(()=>[d(_(D))]),_:1}),l[2]||(l[2]=t("span",{class:"font-medium"},"数据分析",-1))])]),default:n(()=>[t("div",$,[t("div",null,[l[3]||(l[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 选择数据源 ",-1)),d(x,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),placeholder:"请选择要分析的数据源",style:{width:"100%"}},{default:n(()=>[(a(!0),u(v,null,f(p.value,e=>(a(),c(b,{key:e.id,label:`${e.name} (${e.recordCount}条)`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",null,[l[4]||(l[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 分析类型 ",-1)),d(x,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),placeholder:"请选择分析类型",style:{width:"100%"}},{default:n(()=>[(a(!0),u(v,null,f(_(A),e=>(a(),c(b,{key:e.value,label:e.label,value:e.value},{default:n(()=>[t("div",null,[t("div",null,m(e.label),1),t("div",J,m(e.description),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",M,[d(j,{type:"primary",icon:_(E),loading:s.loading,disabled:!i.value||!r.value,onClick:R},{default:n(()=>[...l[5]||(l[5]=[V(" 开始分析 ",-1)])]),_:1},8,["icon","loading","disabled"])])])]),_:1}),s.analysisResults.length>0?(a(),c(h,{key:0,shadow:"never",class:"border"},{header:n(()=>[...l[6]||(l[6]=[t("span",{class:"font-medium"},"分析结果",-1)])]),default:n(()=>[t("div",O,[(a(!0),u(v,null,f(s.analysisResults,e=>(a(),u("div",{key:e.id,class:"p-4 bg-gray-50 rounded-lg"},[t("div",q,[t("div",G,[d(P,{type:"primary",size:"small"},{default:n(()=>[V(m(z(e.analysisType)),1)]),_:2},1024)]),t("div",H,m(e.createdAt),1)]),t("div",K,[t("pre",Q,m(T(e.result)),1)])]))),128))])]),_:1})):g("",!0),p.value.length===0?(a(),c(k,{key:1,description:"暂无可用的数据源进行分析，请先创建并连接数据源",class:"py-12"})):g("",!0),p.value.length>0&&s.analysisResults.length===0?(a(),c(k,{key:2,description:"暂无分析结果，请选择数据源和分析类型开始分析",class:"py-8"})):g("",!0)])}}});export{ee as _};
