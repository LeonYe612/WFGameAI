import{d as j,r as I}from"./index-52ed101c.js";import{l as N,r as S,w as V,z as d,h as a,j as r,y as n,H as s,k as t,v as w,x as c,A as f,Q as i,q as y,F as E,m as F,ah as z,ai as A,_ as q}from"./index-c3bc70ba.js";const m=u=>(z("data-v-ed6daeb3"),u=u(),A(),u),H={key:0,class:"mb-4"},L={class:"flex items-center justify-between"},O={class:"flex items-center"},Q={class:"font-medium"},U={class:"text-sm text-gray-500"},$={class:"text-sm text-gray-600"},G=m(()=>t("strong",null,"类型：",-1)),J={key:0},K=m(()=>t("strong",null,"描述：",-1)),M=m(()=>t("strong",null,"最后更新：",-1)),P={key:1,class:"text-center py-12"},R=m(()=>t("p",{class:"text-gray-500"},"正在加载测试数据...",-1)),W={class:"flex items-center justify-between"},X=m(()=>t("span",{class:"font-medium"},"测试数据",-1)),Y={key:0},Z={key:1,class:"text-gray-400"},ee=N({name:"TestDataTable",__name:"testDataTable",props:{testData:{},currentDataSource:{},loading:{type:Boolean}},emits:["refresh"],setup(u,{emit:x}){const _=u,b=S([]),p=S([]),T=()=>{if(_.testData&&_.testData.length>0){const e=new Set;_.testData.forEach(o=>{Object.keys(o.data||{}).forEach(h=>{e.add(h)})}),b.value=Array.from(e),p.value=_.testData.map(o=>({id:o.id,name:o.name,...o.data}))}else b.value=[],p.value=[]};return V(()=>_.testData,()=>{T()},{immediate:!0}),(e,o)=>{const h=d("el-icon"),D=d("el-card"),C=d("el-button"),g=d("el-table-column"),B=d("el-table"),k=d("el-empty");return a(),r("div",null,[e.currentDataSource?(a(),r("div",H,[n(D,{shadow:"never",class:"border"},{header:s(()=>[t("div",L,[t("div",O,[n(h,{class:"mr-2"},{default:s(()=>[n(w(j))]),_:1}),t("span",Q,c(e.currentDataSource.name),1)]),t("div",U," 共 "+c(e.testData.length)+" 条测试数据 ",1)])]),default:s(()=>[t("div",$,[t("p",null,[G,f(c(e.currentDataSource.type),1)]),e.currentDataSource.description?(a(),r("p",J,[K,f(c(e.currentDataSource.description),1)])):i("",!0),t("p",null,[M,f(c(e.currentDataSource.lastUpdated),1)])])]),_:1})])):i("",!0),e.loading?(a(),r("div",P,[n(h,{class:"animate-spin text-4xl text-primary mb-4"},{default:s(()=>[n(w(I))]),_:1}),R])):i("",!0),!e.loading&&p.value.length>0?(a(),y(D,{key:2,shadow:"never",class:"border"},{header:s(()=>[t("div",W,[X,n(C,{size:"small",onClick:o[0]||(o[0]=l=>x("refresh"))},{default:s(()=>[f(" 刷新数据 ")]),_:1})])]),default:s(()=>[n(B,{data:p.value,stripe:"",style:{width:"100%"},"max-height":"400",class:"test-data-table"},{default:s(()=>[n(g,{prop:"name",label:"数据名称",width:"150",fixed:"left"}),(a(!0),r(E,null,F(b.value,l=>(a(),y(g,{key:l,prop:l,label:l,"min-width":"120","show-overflow-tooltip":""},{default:s(({row:v})=>[v[l]!==void 0&&v[l]!==null?(a(),r("span",Y,c(v[l]),1)):(a(),r("span",Z,"--"))]),_:2},1032,["prop","label"]))),128))]),_:1},8,["data"])]),_:1})):i("",!0),!e.loading&&!e.currentDataSource?(a(),y(k,{key:3,description:"请先选择一个数据源来查看测试数据",class:"py-12"})):i("",!0),!e.loading&&e.currentDataSource&&p.value.length===0?(a(),y(k,{key:4,description:"当前数据源暂无测试数据",class:"py-12"})):i("",!0)])}}});const se=q(ee,[["__scopeId","data-v-ed6daeb3"]]);export{se as default};
