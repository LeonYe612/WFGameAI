import{p as G,u as K,d as P,I as W,J as X,r as Y}from"./index-52ed101c.js";import{M as Z}from"./index-aa289759.js";/* empty css                                                                     */import ee from"./scriptsTable-8534e4c1.js";import te from"./scriptImportDialog-fa91b2fc.js";import oe from"./scriptCreateDialog-68cc4ce3.js";import ie from"./scriptSettingsDialog-f4f389c0.js";import{useScriptsManagement as re}from"./hook-93556663.js";import{l as ae,r as g,o as ne,z as f,h as se,q as le,H as n,k as l,y as i,A as s,v as e,Q as ce,aO as I,ah as pe,ai as de,_ as ue}from"./index-c3bc70ba.js";import"./activeTeamInfo.vue_vue_type_script_setup_true_lang-70492afd.js";import"./teamStoreStateHook-a7dc154e.js";import"./team-2a364612.js";import"./team-dc58a0de.js";import"./request-6dd7bfdd.js";import"./enums-d2c4bc7a.js";import"./team-3cb80684.js";import"./scriptEditDialog-e8c260f7.js";import"./scripts-c0f2e4d3.js";import"./scriptReplayDialog-d8b1bf82.js";import"./rules-513bd75e.js";const ge=p=>(pe("data-v-7947f0cc"),p=p(),de(),p),fe={class:"flex items-center justify-between"},me={class:"flex items-center space-x-2 ml-auto"},_e={class:"scripts-content"},ye=ge(()=>l("p",null,[l("strong",null,"脚本日志功能:"),s(' 可以通过"加入日志"和"移出日志"功能控制哪些脚本会出现在测试报告中。 已加入日志的脚本会在测试报告中显示执行记录，未加入日志的脚本则不会。 ')],-1)),ve={class:"flex-1 min-h-0"},he=ae({name:"ScriptsManagement",__name:"index",setup(p){const{scripts:B,categories:u,loading:d,error:M,stats:R,searchQuery:m,categoryFilter:_,typeFilter:y,includeInLogFilter:v,viewMode:h,filteredAndSortedScripts:T,settings:b,fetchScripts:c,fetchCategories:z,executeDebug:F,executeRecord:V,duplicateScript:L,removeScript:U,toggleScriptLogStatus:N,loadSettings:q,saveSettings:Q}=re(),S=g(),C=g(),x=g();ne(()=>{q(),c(),z()});const A=async t=>{try{const o=await I.prompt("请输入新脚本名称:","复制脚本",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:`复制_${t}`,inputValidator:r=>!r||r.trim()===""?"脚本名称不能为空":r.length>100?"脚本名称不能超过100个字符":!0,inputErrorMessage:"请输入有效的脚本名称"});o.value&&await L(t,o.value.trim())}catch{}},E=async t=>{try{await I.confirm(`确定要删除脚本 "${t}" 吗？此操作不可恢复。`,"确认删除",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}),await U(t)}catch{}},w=()=>{var t;(t=S.value)==null||t.showDialog()},k=()=>{var t;(t=C.value)==null||t.showDialog()},$=()=>{var t;(t=x.value)==null||t.showDialog(b.value)},j=t=>{Q(t)},H=()=>{c()},J=()=>{c()};return(t,o)=>{const r=f("el-button"),D=f("el-divider"),O=f("el-alert");return se(),le(Z,{title:"脚本管理"},{"header-extra":n(()=>[l("div",fe,[l("div",me,[i(r,{icon:e(G),size:"large",type:"primary",onClick:k},{default:n(()=>[s(" 新建脚本 ")]),_:1},8,["icon"]),i(r,{icon:e(K),size:"large",type:"success",plain:"",onClick:w},{default:n(()=>[s(" 导入脚本 ")]),_:1},8,["icon"]),i(D,{direction:"vertical"}),i(r,{icon:e(P),size:"large",type:"info",plain:"",onClick:e(F),loading:e(d)},{default:n(()=>[s(" 调试脚本 ")]),_:1},8,["icon","onClick","loading"]),i(r,{icon:e(W),size:"large",type:"warning",plain:"",onClick:e(V),loading:e(d)},{default:n(()=>[s(" 录制脚本 ")]),_:1},8,["icon","onClick","loading"]),i(D,{direction:"vertical"}),i(r,{icon:e(X),size:"large",type:"primary",plain:"",onClick:$},{default:n(()=>[s(" 设置 ")]),_:1},8,["icon"]),i(r,{icon:e(Y),size:"large",type:"primary",plain:"",onClick:e(c),loading:e(d)},{default:n(()=>[s(" 刷新列表 ")]),_:1},8,["icon","onClick","loading"])])])]),default:n(()=>[l("div",_e,[i(O,{title:"功能演示",type:"info",class:"mb-6","show-icon":"",closable:!0},{default:n(()=>[ye]),_:1}),ce("",!0),l("div",ve,[i(ee,{scripts:e(B),categories:e(u),loading:e(d),error:e(M),stats:e(R),"search-query":e(m),"category-filter":e(_),"type-filter":e(y),"include-in-log-filter":e(v),"view-mode":e(h),"filtered-sorted-scripts":e(T),onCopy:A,onDelete:E,onToggleLog:e(N),onRefresh:e(c),onCreate:k,onImport:w,"onUpdate:searchQuery":o[0]||(o[0]=a=>m.value=a),"onUpdate:categoryFilter":o[1]||(o[1]=a=>_.value=a),"onUpdate:typeFilter":o[2]||(o[2]=a=>y.value=a),"onUpdate:includeInLogFilter":o[3]||(o[3]=a=>v.value=a),"onUpdate:viewMode":o[4]||(o[4]=a=>h.value=a)},null,8,["scripts","categories","loading","error","stats","search-query","category-filter","type-filter","include-in-log-filter","view-mode","filtered-sorted-scripts","onToggleLog","onRefresh"])])]),i(te,{ref_key:"importDialogRef",ref:S,categories:e(u),onImported:H},null,8,["categories"]),i(oe,{ref_key:"createDialogRef",ref:C,categories:e(u),onCreated:J},null,8,["categories"]),i(ie,{ref_key:"settingsDialogRef",ref:x,onSaved:j},null,512)]),_:1})}}});const Ae=ue(he,[["__scopeId","data-v-7947f0cc"]]);export{Ae as default};
