import{i as q}from"./index-52ed101c.js";import{a as z,b as A,c as G}from"./rules-69960a32.js";import{l as H,c as D,r as f,w as U,z as n,h as i,q as r,H as a,k as v,y as t,A as m,x as y,j as N,m as S,u as I,v as p,F as E,aN as L,M as T,_ as X}from"./index-c3bc70ba.js";import"./tasks-69968588.js";const J={style:{display:"flex","align-items":"center",gap:"8px"}},K={style:{display:"flex","align-items":"center",gap:"8px"}},Q={class:"dialog-footer"},W=H({__name:"taskFormDialog",props:{visible:{type:Boolean,default:!1},task:{default:null},loading:{type:Boolean,default:!1}},emits:["update:visible","submit","cancel"],setup(M,{emit:c}){const u=M,b=D({get:()=>u.visible,set:l=>c("update:visible",l)}),_=f(),o=f({name:"",type:"",device:"",description:""}),g=D(()=>!!u.task),O=f([{label:"OnePlus 9 Pro",value:"oneplus_9_pro"},{label:"Samsung Galaxy S21",value:"samsung_s21"},{label:"Xiaomi Mi 11",value:"xiaomi_mi11"},{label:"多设备",value:"multiple"}]),V=()=>{o.value={name:"",type:"",device:"",description:""},T(()=>{var l;(l=_.value)==null||l.clearValidate()})};U(()=>u.task,l=>{l?o.value={name:l.name,type:l.type,device:l.device,description:l.description||""}:V()},{immediate:!0}),U(()=>u.visible,l=>{l&&!u.task&&V()});const R=async()=>{var l;try{await((l=_.value)==null?void 0:l.validate()),c("submit",{...o.value})}catch{L.warning("请完善表单信息")}},x=()=>{c("cancel")};return(l,s)=>{const k=n("el-input"),d=n("el-form-item"),h=n("el-icon"),w=n("el-option"),C=n("el-select"),P=n("el-form"),F=n("el-button"),j=n("el-dialog");return i(),r(j,{modelValue:b.value,"onUpdate:modelValue":s[4]||(s[4]=e=>b.value=e),title:g.value?"编辑任务":"新建任务",width:"600px","close-on-click-modal":!1,onClose:x},{footer:a(()=>[v("div",Q,[t(F,{onClick:x},{default:a(()=>[m(" 取消 ")]),_:1}),t(F,{type:"primary",loading:l.loading,onClick:R},{default:a(()=>[m(y(g.value?"保存":"创建"),1)]),_:1},8,["loading"])])]),default:a(()=>[t(P,{ref_key:"formRef",ref:_,model:o.value,rules:p(G),"label-width":"100px"},{default:a(()=>[t(d,{label:"任务名称",prop:"name"},{default:a(()=>[t(k,{modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=e=>o.value.name=e),placeholder:"请输入任务名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(d,{label:"任务类型",prop:"type"},{default:a(()=>[t(C,{modelValue:o.value.type,"onUpdate:modelValue":s[1]||(s[1]=e=>o.value.type=e),placeholder:"请选择任务类型",style:{width:"100%"}},{default:a(()=>[(i(!0),N(E,null,S(p(A).slice(1),e=>(i(),r(w,{key:e.value,label:e.label,value:e.value},{default:a(()=>[v("div",J,[t(h,null,{default:a(()=>{var B;return[(i(),r(I((B=p(z)[e.value])==null?void 0:B.icon)))]}),_:2},1024),m(" "+y(e.label),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"目标设备",prop:"device"},{default:a(()=>[t(C,{modelValue:o.value.device,"onUpdate:modelValue":s[2]||(s[2]=e=>o.value.device=e),placeholder:"请选择目标设备",style:{width:"100%"},filterable:""},{default:a(()=>[(i(!0),N(E,null,S(O.value,e=>(i(),r(w,{key:e.value,label:e.label,value:e.value},{default:a(()=>[v("div",K,[t(h,null,{default:a(()=>[t(p(q))]),_:1}),m(" "+y(e.label),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"任务描述"},{default:a(()=>[t(k,{modelValue:o.value.description,"onUpdate:modelValue":s[3]||(s[3]=e=>o.value.description=e),type:"textarea",rows:3,placeholder:"请输入任务描述（可选）",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});const le=X(W,[["__scopeId","data-v-c32cfaf1"]]);export{le as default};
