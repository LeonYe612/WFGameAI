import{u as K,p as L}from"./index-ccf167da.js";import{M as O}from"./index-b52b6f30.js";import P from"./dataStats-034aaeb8.js";import W from"./dataSourcesTable-fbc97558.js";import{_ as X}from"./dataSourceDialog.vue_vue_type_script_setup_true_lang-eb51a778.js";import{_ as Y}from"./importDialog.vue_vue_type_script_setup_true_lang-d247771d.js";import Z from"./testDataTable-d274648e.js";import{_ as ee}from"./dataAnalysisPanel.vue_vue_type_script_setup_true_lang-e8fefe39.js";import{useDataManagement as te}from"./hook-22ae1894.js";import{m as ae,r as f,o as oe,A as i,j as se,u as ne,I as n,l as _,z as o,B as b,x as e,_ as re}from"./index-fbbdd03e.js";import"./activeTeamInfo.vue_vue_type_script_setup_true_lang-499f8b5f.js";import"./teamStoreStateHook-6f9b9c84.js";import"./team-9c8eb503.js";import"./team-8f659f82.js";import"./request-2aeceb02.js";import"./enums-b2002ef1.js";import"./team-b2bfcf59.js";import"./types-5a18ccfd.js";import"./rules-a40408e3.js";const le={class:"flex items-center justify-between"},ie={class:"flex items-center space-x-2 ml-auto"},ue={class:"data-content"},de=ae({name:"DataManagement",__name:"index",setup(ce){const{dataSources:u,testData:S,analysisResults:h,loading:l,error:C,stats:T,currentDataSource:r,searchQuery:D,statusFilter:v,typeFilter:y,filteredDataSources:V,fetchDataSources:g,createNewDataSource:R,updateExistingDataSource:w,removeDataSource:z,testConnection:F,refreshDataSourceData:I,fetchTestData:k,importDataFile:E,exportDataFile:M,analyzeData:U,fetchAnalysisResults:A}=te(),d=f(),c=f(!1),m=f("datasource");oe(()=>{g()});const B=()=>{var a;(a=d.value)==null||a.showDialog()},$=a=>{var t;(t=d.value)==null||t.showDialog(a)},N=a=>{a.id?w(a.id,a):R(a)},j=()=>{c.value=!0},q=a=>{E(a)},Q=a=>{M({sourceId:a.id,format:"excel"})},G=a=>{var t;m.value=a,a==="analysis"&&(t=r.value)!=null&&t.id&&A(r.value.id)};return(a,t)=>{const x=i("el-button"),p=i("el-tab-pane"),H=i("el-tabs"),J=i("el-card");return se(),ne(O,{title:"数据管理"},{"header-extra":n(()=>[_("div",le,[_("div",ie,[o(x,{icon:e(K),size:"large",type:"primary",plain:"",onClick:j},{default:n(()=>[...t[6]||(t[6]=[b(" 导入数据 ",-1)])]),_:1},8,["icon"]),o(x,{icon:e(L),size:"large",type:"success",onClick:B},{default:n(()=>[...t[7]||(t[7]=[b(" 新建数据源 ",-1)])]),_:1},8,["icon"])])])]),default:n(()=>[_("div",ue,[o(P,{stats:e(T),loading:e(l)},null,8,["stats","loading"]),o(J,{shadow:"never",class:"border-0"},{default:n(()=>[o(H,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s),onTabChange:G},{default:n(()=>[o(p,{label:"数据源",name:"datasource"},{default:n(()=>[o(W,{"data-sources":e(u),loading:e(l),error:e(C),"search-query":e(D),"status-filter":e(v),"type-filter":e(y),"filtered-data-sources":e(V),onRefresh:e(g),onEdit:$,onDelete:e(z),onTestConnection:e(F),onRefreshSource:e(I),onExport:Q,"onUpdate:searchQuery":t[0]||(t[0]=s=>D.value=s),"onUpdate:statusFilter":t[1]||(t[1]=s=>v.value=s),"onUpdate:typeFilter":t[2]||(t[2]=s=>y.value=s)},null,8,["data-sources","loading","error","search-query","status-filter","type-filter","filtered-data-sources","onRefresh","onDelete","onTestConnection","onRefreshSource"])]),_:1}),o(p,{label:"测试数据",name:"testdata"},{default:n(()=>[o(Z,{"test-data":e(S),"current-data-source":e(r),loading:e(l),onRefresh:t[3]||(t[3]=s=>e(r)&&e(k)(e(r).id))},null,8,["test-data","current-data-source","loading"])]),_:1}),o(p,{label:"数据分析",name:"analysis"},{default:n(()=>[o(ee,{"data-sources":e(u),"analysis-results":e(h),loading:e(l),onAnalyze:e(U)},null,8,["data-sources","analysis-results","loading","onAnalyze"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),o(X,{ref_key:"dataSourceDialogRef",ref:d,onConfirm:N},null,512),o(Y,{modelValue:c.value,"onUpdate:modelValue":t[5]||(t[5]=s=>c.value=s),"data-sources":e(u),onImport:q},null,8,["modelValue","data-sources"])]),_:1})}}});const Ie=re(de,[["__scopeId","data-v-613bc10e"]]);export{Ie as default};
